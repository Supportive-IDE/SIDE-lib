"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DocInfo=void 0;var _executionline=require("./executionline.js"),_line=require("./line.js"),_block=require("./block.js"),_identifiers=require("./identifiers.js"),_expression=require("./expression.js"),_conditional=require("./conditional.js"),_compoundExpression=require("./compoundExpression.js"),_symptom=require("../problem-finder/symptom.js"),_misconception=require("../problem-finder/misconception.js"),_constants=require("../utils/constants.js");function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var i,n,r=[],o=!0,a=!1;try{for(s=s.call(e);!(o=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw n}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==s.return||s.return()}finally{if(a)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _classPrivateFieldInitSpec(e,t,s){_checkPrivateRedeclaration(e,t),t.set(e,s)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classPrivateMethodGet(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function _classPrivateFieldSet(e,t,s){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),s),s}function _classExtractFieldDescriptor(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}var _text=new WeakMap,_executionLines=new WeakMap,_documentRoot=new WeakMap,_userDefinedFunctions=new WeakMap,_untrackedFunctions=new WeakMap,_otherIdentifiers=new WeakMap,_variables=new WeakMap,_modules=new WeakMap,_conditionals=new WeakMap,_symptoms=new WeakMap,_splitLines=new WeakSet,_createLine=new WeakSet,_evaluateCompoundExpressions=new WeakSet,_updateForLoopVariable=new WeakSet,_getCompoundStartIndex=new WeakSet,_checkForModuleUpdates=new WeakSet,_buildCompoundExpression=new WeakSet,_processNestedCompoundExpression=new WeakSet,_updateCurrentBlock=new WeakSet,_processNewBlock=new WeakSet,_processModules=new WeakSet,_trackFunctionsAndVariables=new WeakSet,_checkForVariablesWithTypeNames=new WeakSet,_trackVariables=new WeakSet,_processOtherIdentifiers=new WeakSet,_isOverriden=new WeakSet,_convertToUserDefinedFuncCall=new WeakSet,_processBuiltIns=new WeakSet,_processLineSymptoms=new WeakSet,_processFString=new WeakSet,_completeUserDefinedFunction=new WeakSet,_hasBranchWithoutReturn=new WeakSet,_processFunctionCalls=new WeakSet,_updateReturnType=new WeakSet,_processVariables=new WeakSet,_processMultiAssignValue=new WeakSet,_makeVariable=new WeakSet,_checkIfForLoopVariable=new WeakSet,_getExistingListCompVariable=new WeakSet,_getExistingVariable=new WeakSet,_processConditional=new WeakSet,_trackNewFunction=new WeakSet,_isNamedImport=new WeakSet,_getIndexOfEntity=new WeakSet,_convertExecutionLineIndexToLineIndex=new WeakSet,_getGroupText=new WeakSet,_findEndOfBooleanClause=new WeakSet,_separateBooleanExpressionClauses=new WeakSet,_findClosingExpression=new WeakSet,_getClosingBracket=new WeakSet,_getContentsOfGroup=new WeakSet,_isExpressionInGroup=new WeakSet,_findMatchingVariable=new WeakSet,_getMatchingVariableUsage=new WeakSet,_matchComponents=new WeakSet,_sequenceInComponent=new WeakSet,_matchSimpleSequence=new WeakSet,_compileExpressionComparisons=new WeakSet,_compareExpressions=new WeakSet,_identifyIfSequences=new WeakSet,_getComponents=new WeakSet,_getConditionalExpressions=new WeakSet,_summariseExpressions=new WeakSet,_getArgumentType=new WeakSet,_getSummaryOfContentInParentheses=new WeakSet,_getNumberOfArguments=new WeakSet,_isSubscriptable=new WeakSet,_compareValues=new WeakSet,_isEnumerateIndexVar=new WeakSet,_isForInRangeVar=new WeakSet,_isAssignedLiteral=new WeakSet,_isUndefined=new WeakSet,_isTypeVariable=new WeakSet,_buildBlockString=new WeakSet,_blockMatchesPattern=new WeakSet,_loopExits=new WeakSet,_getLoopVars=new WeakSet,_getBlocksWithinParent=new WeakSet,_isVarModified=new WeakSet,_getLoopLineNumbers=new WeakSet,_getIndexOfNextLineFollowingBlock=new WeakSet,_isWhileTrue=new WeakSet,_allBranchesReturn=new WeakSet,_allBranchesExit=new WeakSet,_getParentFunctionName=new WeakSet,_getException=new WeakSet,_getExecutionLineNumberFromDocLineNumber=new WeakSet,_checkForBlockLevelSymptoms=new WeakSet,_checkForFunctionsWithSameNameAsVar=new WeakSet,_checkForSequentialIfs=new WeakSet,_checkForExecutionLineSymptoms=new WeakSet,_checkForUnexpectedColon=new WeakSet,_checkForNaturalLanguageOr=new WeakSet,_checkForUnusedValues=new WeakSet,_checkForAssignedNone=new WeakSet,_checkForUnnecessaryConversion=new WeakSet,_checkForTypeError=new WeakSet,_checkForUnknownFunctions=new WeakSet,_checkForUserDefinedFunctionSymptoms=new WeakSet,_checkFunctionReturns=new WeakSet,_checkFunctionCalls=new WeakSet,_checkForVariableSymptoms=new WeakSet,_checkSubscriptions=new WeakSet,_checkVariableOverwrites=new WeakSet,_checkForShortenableConditionals=new WeakSet,_checkForBooleanAssignment=new WeakSet,_checkForBooleanReturn=new WeakSet,_checkForEarlyExit=new WeakSet,_checkForWhileTrue=new WeakSet,_processInfiniteLoop=new WeakSet,_checkForUnmodifiedLoopVar=new WeakSet,_checkForCodeAfterExhaustiveConditional=new WeakSet,_checkForIteratorModification=new WeakSet,_checkForCodeAfterExit=new WeakSet,_checkForRedundantRaise=new WeakSet,_getBlockBeginningOnExecutionLine=new WeakSet,_getAllBlocksOf=new WeakSet,_getAllBlocksOfAny=new WeakSet,DocInfo=function(){function e(t){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_getAllBlocksOfAny),_classPrivateMethodInitSpec(this,_getAllBlocksOf),_classPrivateMethodInitSpec(this,_getBlockBeginningOnExecutionLine),_classPrivateMethodInitSpec(this,_checkForRedundantRaise),_classPrivateMethodInitSpec(this,_checkForCodeAfterExit),_classPrivateMethodInitSpec(this,_checkForIteratorModification),_classPrivateMethodInitSpec(this,_checkForCodeAfterExhaustiveConditional),_classPrivateMethodInitSpec(this,_checkForUnmodifiedLoopVar),_classPrivateMethodInitSpec(this,_processInfiniteLoop),_classPrivateMethodInitSpec(this,_checkForWhileTrue),_classPrivateMethodInitSpec(this,_checkForEarlyExit),_classPrivateMethodInitSpec(this,_checkForBooleanReturn),_classPrivateMethodInitSpec(this,_checkForBooleanAssignment),_classPrivateMethodInitSpec(this,_checkForShortenableConditionals),_classPrivateMethodInitSpec(this,_checkVariableOverwrites),_classPrivateMethodInitSpec(this,_checkSubscriptions),_classPrivateMethodInitSpec(this,_checkForVariableSymptoms),_classPrivateMethodInitSpec(this,_checkFunctionCalls),_classPrivateMethodInitSpec(this,_checkFunctionReturns),_classPrivateMethodInitSpec(this,_checkForUserDefinedFunctionSymptoms),_classPrivateMethodInitSpec(this,_checkForUnknownFunctions),_classPrivateMethodInitSpec(this,_checkForTypeError),_classPrivateMethodInitSpec(this,_checkForUnnecessaryConversion),_classPrivateMethodInitSpec(this,_checkForAssignedNone),_classPrivateMethodInitSpec(this,_checkForUnusedValues),_classPrivateMethodInitSpec(this,_checkForNaturalLanguageOr),_classPrivateMethodInitSpec(this,_checkForUnexpectedColon),_classPrivateMethodInitSpec(this,_checkForExecutionLineSymptoms),_classPrivateMethodInitSpec(this,_checkForSequentialIfs),_classPrivateMethodInitSpec(this,_checkForFunctionsWithSameNameAsVar),_classPrivateMethodInitSpec(this,_checkForBlockLevelSymptoms),_classPrivateMethodInitSpec(this,_getExecutionLineNumberFromDocLineNumber),_classPrivateMethodInitSpec(this,_getException),_classPrivateMethodInitSpec(this,_getParentFunctionName),_classPrivateMethodInitSpec(this,_allBranchesExit),_classPrivateMethodInitSpec(this,_allBranchesReturn),_classPrivateMethodInitSpec(this,_isWhileTrue),_classPrivateMethodInitSpec(this,_getIndexOfNextLineFollowingBlock),_classPrivateMethodInitSpec(this,_getLoopLineNumbers),_classPrivateMethodInitSpec(this,_isVarModified),_classPrivateMethodInitSpec(this,_getBlocksWithinParent),_classPrivateMethodInitSpec(this,_getLoopVars),_classPrivateMethodInitSpec(this,_loopExits),_classPrivateMethodInitSpec(this,_blockMatchesPattern),_classPrivateMethodInitSpec(this,_buildBlockString),_classPrivateMethodInitSpec(this,_isTypeVariable),_classPrivateMethodInitSpec(this,_isUndefined),_classPrivateMethodInitSpec(this,_isAssignedLiteral),_classPrivateMethodInitSpec(this,_isForInRangeVar),_classPrivateMethodInitSpec(this,_isEnumerateIndexVar),_classPrivateMethodInitSpec(this,_compareValues),_classPrivateMethodInitSpec(this,_isSubscriptable),_classPrivateMethodInitSpec(this,_getNumberOfArguments),_classPrivateMethodInitSpec(this,_getSummaryOfContentInParentheses),_classPrivateMethodInitSpec(this,_getArgumentType),_classPrivateMethodInitSpec(this,_summariseExpressions),_classPrivateMethodInitSpec(this,_getConditionalExpressions),_classPrivateMethodInitSpec(this,_getComponents),_classPrivateMethodInitSpec(this,_identifyIfSequences),_classPrivateMethodInitSpec(this,_compareExpressions),_classPrivateMethodInitSpec(this,_compileExpressionComparisons),_classPrivateMethodInitSpec(this,_matchSimpleSequence),_classPrivateMethodInitSpec(this,_sequenceInComponent),_classPrivateMethodInitSpec(this,_matchComponents),_classPrivateMethodInitSpec(this,_getMatchingVariableUsage),_classPrivateMethodInitSpec(this,_findMatchingVariable),_classPrivateMethodInitSpec(this,_isExpressionInGroup),_classPrivateMethodInitSpec(this,_getContentsOfGroup),_classPrivateMethodInitSpec(this,_getClosingBracket),_classPrivateMethodInitSpec(this,_findClosingExpression),_classPrivateMethodInitSpec(this,_separateBooleanExpressionClauses),_classPrivateMethodInitSpec(this,_findEndOfBooleanClause),_classPrivateMethodInitSpec(this,_getGroupText),_classPrivateMethodInitSpec(this,_convertExecutionLineIndexToLineIndex),_classPrivateMethodInitSpec(this,_getIndexOfEntity),_classPrivateMethodInitSpec(this,_isNamedImport),_classPrivateMethodInitSpec(this,_trackNewFunction),_classPrivateMethodInitSpec(this,_processConditional),_classPrivateMethodInitSpec(this,_getExistingVariable),_classPrivateMethodInitSpec(this,_getExistingListCompVariable),_classPrivateMethodInitSpec(this,_checkIfForLoopVariable),_classPrivateMethodInitSpec(this,_makeVariable),_classPrivateMethodInitSpec(this,_processMultiAssignValue),_classPrivateMethodInitSpec(this,_processVariables),_classPrivateMethodInitSpec(this,_updateReturnType),_classPrivateMethodInitSpec(this,_processFunctionCalls),_classPrivateMethodInitSpec(this,_hasBranchWithoutReturn),_classPrivateMethodInitSpec(this,_completeUserDefinedFunction),_classPrivateMethodInitSpec(this,_processFString),_classPrivateMethodInitSpec(this,_processLineSymptoms),_classPrivateMethodInitSpec(this,_processBuiltIns),_classPrivateMethodInitSpec(this,_convertToUserDefinedFuncCall),_classPrivateMethodInitSpec(this,_isOverriden),_classPrivateMethodInitSpec(this,_processOtherIdentifiers),_classPrivateMethodInitSpec(this,_trackVariables),_classPrivateMethodInitSpec(this,_checkForVariablesWithTypeNames),_classPrivateMethodInitSpec(this,_trackFunctionsAndVariables),_classPrivateMethodInitSpec(this,_processModules),_classPrivateMethodInitSpec(this,_processNewBlock),_classPrivateMethodInitSpec(this,_updateCurrentBlock),_classPrivateMethodInitSpec(this,_processNestedCompoundExpression),_classPrivateMethodInitSpec(this,_buildCompoundExpression),_classPrivateMethodInitSpec(this,_checkForModuleUpdates),_classPrivateMethodInitSpec(this,_getCompoundStartIndex),_classPrivateMethodInitSpec(this,_updateForLoopVariable),_classPrivateMethodInitSpec(this,_evaluateCompoundExpressions),_classPrivateMethodInitSpec(this,_createLine),_classPrivateMethodInitSpec(this,_splitLines),_classPrivateFieldInitSpec(this,_text,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_executionLines,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_documentRoot,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_userDefinedFunctions,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_untrackedFunctions,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_otherIdentifiers,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_variables,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_modules,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_conditionals,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_symptoms,{writable:!0,value:[]}),_defineProperty(this,"numLines",0),_classPrivateFieldSet(this,_text,t),_classPrivateFieldSet(this,_documentRoot,new _block.Block),_classPrivateFieldSet(this,_userDefinedFunctions,new Map),_classPrivateFieldSet(this,_untrackedFunctions,new Map),_classPrivateFieldSet(this,_variables,new Map),_classPrivateFieldSet(this,_otherIdentifiers,new Set),_classPrivateFieldSet(this,_modules,new Map),_classPrivateMethodGet(this,_splitLines,_splitLines2).call(this,t),_classPrivateMethodGet(this,_checkForBlockLevelSymptoms,_checkForBlockLevelSymptoms2).call(this),_classPrivateMethodGet(this,_checkForExecutionLineSymptoms,_checkForExecutionLineSymptoms2).call(this)}return _createClass(e,[{key:"getExecutionLines",value:function(){return _classPrivateFieldGet(this,_executionLines)}},{key:"getUserDefinedFunctions",value:function(){return _classPrivateFieldGet(this,_userDefinedFunctions)}},{key:"getVariables",value:function(){return _classPrivateFieldGet(this,_variables)}},{key:"getConditionals",value:function(){return _classPrivateFieldGet(this,_conditionals)}},{key:"getExecutionLineContainingExpression",value:function(e,t,s){for(var i=t<_classPrivateFieldGet(this,_executionLines).length?t:_classPrivateFieldGet(this,_executionLines).length-1;i>=0&&i<_classPrivateFieldGet(this,_executionLines).length;)if(_classPrivateFieldGet(this,_executionLines)[i].containsLine(t)){var n=_classPrivateFieldGet(this,_executionLines)[i].getExpressions(),r=_classPrivateFieldGet(this,_executionLines)[i].convertLineIndexToLocalIndex(t,s);if(r>=0&&r<n.length&&n[r].getValue()===e)return _classPrivateFieldGet(this,_executionLines)[i];i--}else{if(!(_classPrivateFieldGet(this,_executionLines)[i].minLine()>t))break;i--}for(i=t+1;i>=0&&i<_classPrivateFieldGet(this,_executionLines).length;)if(_classPrivateFieldGet(this,_executionLines)[i].containsLine(t)){var o=_classPrivateFieldGet(this,_executionLines)[i].getExpressions(),a=_classPrivateFieldGet(this,_executionLines)[i].convertLineIndexToLocalIndex(t,s);if(a>=0&&a<o.length&&o[a].getValue()===e)return _classPrivateFieldGet(this,_executionLines)[i];i++}else{if(!(_classPrivateFieldGet(this,_executionLines)[i].maxLine()<t))break;i++}}},{key:"getSymptoms",value:function(){return _classPrivateFieldGet(this,_symptoms)}},{key:"getMisconceptions",value:function(){return(0,_misconception.identifyMisconceptions)(_classPrivateFieldGet(this,_symptoms),_classPrivateFieldGet(this,_variables),_classPrivateFieldGet(this,_userDefinedFunctions))}},{key:"getText",value:function(){return _classPrivateFieldGet(this,_text)}},{key:"getBlocks",value:function(){return _classPrivateFieldGet(this,_documentRoot)}}]),e}();function _splitLines2(e){var t=e.split(/\r?\n/);this.numLines=t.length;for(var s=[],i=[],n=_classPrivateFieldGet(this,_documentRoot),r=0;r<t.length;r++)n=_classPrivateMethodGet(this,_createLine,_createLine2).call(this,s,i,n,t[r]);_classPrivateFieldSet(this,_executionLines,i),_classPrivateMethodGet(this,_trackFunctionsAndVariables,_trackFunctionsAndVariables2).call(this,i),_classPrivateMethodGet(this,_evaluateCompoundExpressions,_evaluateCompoundExpressions2).call(this,i)}function _createLine2(e,t,s,i){var n=e.length>0&&!e[e.length-1].isFullyProcessed(),r=e.length,o=r>0?e[r-1]:void 0,a=0===r?0:n?o.getLineNumber():o.getLineNumber()+1,l=0===r?0:n?o.getStartingDocIndex():o.getStartingDocIndex()+o.getRawContent(!0).length+1,c=0!==r&&o.continuesOnNextLine(),p=0===r?void 0:o.getMultilineCommentDelimiter(),_=0===r?void 0:o.getStringLiteralDelimiter(),h=0===r?void 0:o.getGroupCharCounts(),d=0===r?void 0:o.getLastExpression(),x=0===r?0:o.getNextLineStartIndex();if(void 0!==d&&d.is(_expression.ExpressionEntity.ContinuationLine)){var u=o.getExpressions();d=u.length>0?u[u.length-1]:void 0}return e.push(new _line.Line(l,a,i,{continuationLine:c,multilineCommentDelimeter:p,stringLiteralDelimeter:_,groupCharCounts:h,lastExpression:d,rawContentStartIndex:x})),c?t[t.length-1].addLine(e[e.length-1]):(o=e[e.length-1],s=_classPrivateMethodGet(this,_updateCurrentBlock,_updateCurrentBlock2).call(this,o,s),t.push(new _executionline.ExecutionLine(o,s))),e[e.length-1].isFullyProcessed()||(s=_classPrivateMethodGet(this,_createLine,_createLine2).call(this,e,t,s,i)),e[e.length-1].isExit()&&s.setBlockExits(),s}function _evaluateCompoundExpressions2(e){var t,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;if(i.isUnfinished())break;var n=i.getBlock().getBlockEntity();if(!i.isBlank()&&!i.isBlockDefinition()||n===_expression.ExpressionEntity.IfDefinition||n===_expression.ExpressionEntity.ElifDefinition||n===_expression.ExpressionEntity.ElseDefinition||n===_expression.ExpressionEntity.WhileDefinition){var r=i.getExpressions(),o=_classPrivateMethodGet(this,_getCompoundStartIndex,_getCompoundStartIndex2).call(this,i,r,0),a=o>0?r[o-1]:void 0;_classPrivateMethodGet(this,_buildCompoundExpression,_buildCompoundExpression2).call(this,i.getCompoundExpression(),r,o,r.length,a)}else if(i.isBlockDefinition()&&n===_expression.ExpressionEntity.ForDefinition){var l=i.indexOfEntity(_expression.ExpressionEntity.ForDefinition),c=i.getExpressions();_classPrivateMethodGet(this,_buildCompoundExpression,_buildCompoundExpression2).call(this,i.getCompoundExpression(),c,l+1,c.length,c[l]),_classPrivateMethodGet(this,_updateForLoopVariable,_updateForLoopVariable2).call(this,i,c,l)}}}catch(e){s.e(e)}finally{s.f()}}function _updateForLoopVariable2(e,t,s){var i=s+1,n=e.indexOfEntity(_expression.ExpressionEntity.InKeyword);if(s>=0&&n>i&&n<t.length-2){var r=t[i],o=2;r.is(_expression.ExpressionEntity.OpenParenthesis)&&(r=t[i+=1],o=4);var a=t[n+1],l=_classPrivateMethodGet(this,_getMatchingVariableUsage,_getMatchingVariableUsage2).call(this,r,i);void 0!==l&&(a.is(_expression.ExpressionEntity.EnumerateFunction)?n-s===o?l.setType(_expression.DataType.Tuple):l.setType(_expression.DataType.Int):a.is(_expression.ExpressionEntity.RangeFunction)?l.setType(_expression.DataType.Int):a.getDataType()===_expression.DataType.String||a.getDataType()===_expression.DataType.File?l.setType(_expression.DataType.String):l.setType(_expression.DataType.Unknown))}}function _getCompoundStartIndex2(e,t,s){for(var i=_expression.ExpressionEntity.Unknown;s<t.length-1;)if(t[s].is(_expression.ExpressionEntity.VariableName)){for(;i===_expression.ExpressionEntity.Unknown&&s<t.length-1&&t[s+1].is(_expression.ExpressionEntity.OpenSquareBracket);){var n=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,s+1);_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e.getCompoundExpression(),t,s+2,n,t[s+1],!0),s=n}if(s<t.length-1&&t[s+1].isChangeOperator())i=t[s+1].getEntity(),s+=2;else{if(!(s<t.length-1&&t[s].is(_expression.ExpressionEntity.VariableName)&&t[s+1].is(_expression.ExpressionEntity.Comma)))break;s+=2}}else{if(t[s].is(_expression.ExpressionEntity.ReturnKeyword))return s+1;if(i===_expression.ExpressionEntity.Unknown&&t[s].isOneOfCategories([_expression.ExpressionCategory.FunctionName,_expression.ExpressionCategory.BuiltInFunctions,_expression.ExpressionCategory.BuiltInMethods,_expression.ExpressionCategory.OtherMethods,_expression.ExpressionCategory.MagicMethods]))return 0;if(i!==_expression.ExpressionEntity.Unknown||!t[s].is(_expression.ExpressionEntity.OpenParenthesis))break;for(var r=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,s),o=s+1,a=!1;o<r;){if(!t[o].isOneOfEntities([_expression.ExpressionEntity.VariableName,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.CloseSquareBracket,_expression.ExpressionEntity.Colon,_expression.ExpressionEntity.IntLiteral,_expression.ExpressionEntity.Comma,_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.CloseParenthesis]))return 0;t[o].is(_expression.ExpressionEntity.VariableName)&&(a=!0),o++}if(!a)return 0;(s=r)<t.length-1&&t[s+1].isChangeOperator()&&(i=t[s+1].getEntity(),s+=2)}return i!==_expression.ExpressionEntity.Unknown?s:0}function _checkForModuleUpdates2(e){if(e.is(_expression.ExpressionEntity.PropertyName)&&_classPrivateMethodGet(this,_isNamedImport,_isNamedImport2).call(this,e.getValue())){console.log("true");var t=(0,_expression.keywordLookup)(e.getValue()),s=t.entity===_expression.ExpressionEntity.Unknown?_expression.ExpressionEntity.NamedImport:t.entity,i=t.category===_expression.ExpressionCategory.Unknown?_expression.ExpressionCategory.ImportedEntities:t.category;e.convert(s,i,s!==_expression.ExpressionEntity.Unknown&&_expression.builtInReturnLookup.has(s)?_expression.builtInReturnLookup.get(s):_expression.DataType.Unknown)}}function _buildCompoundExpression2(e,t){for(var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=s;r<i;r++)if(void 0===n||t[r].isOperator()||t[r].isKeywordUsingValue()||t[r].is(_expression.ExpressionCategory.Other)||t[r].setUsedBy(n),t[r].isOneOfCategories([_expression.ExpressionCategory.Identifiers,_expression.ExpressionCategory.Literals,_expression.ExpressionCategory.Types,_expression.ExpressionCategory.BuiltInFunctions,_expression.ExpressionCategory.BuiltInMethods,_expression.ExpressionCategory.OtherMethods,_expression.ExpressionCategory.MagicMethods,_expression.ExpressionCategory.MathsOperators,_expression.ExpressionCategory.ComparisonOperators,_expression.ExpressionCategory.LogicalOperators,_expression.ExpressionCategory.BuiltInModules,_expression.ExpressionCategory.ImportedEntities,_expression.ExpressionCategory.ModuleFunctions,_expression.ExpressionCategory.ModuleProperties,_expression.ExpressionCategory.Unknown])||t[r].isOneOfEntities([_expression.ExpressionEntity.Dot,_expression.ExpressionEntity.InKeyword,_expression.ExpressionEntity.IsKeyword])){if(e.addExpression(t[r],r),t[r].isOneOfEntities([_expression.ExpressionEntity.AndOperator,_expression.ExpressionEntity.OrOperator])&&r<i-1){var o=_classPrivateMethodGet(this,_findEndOfBooleanClause,_findEndOfBooleanClause2).call(this,t,r+1),a=_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,o+1,n),l=t[r+1].getEntity()===_expression.ExpressionEntity.NotOperator?t[o].getCategory():t[r+1].getCategory(),c=new _expression.Expression(t[r+1].getEntity(),l,t[r+1].getLineNumber(),t[r+1].getLocalIndex(),a.toString(),a.getEvaluatedType());a.addObserver(c),e.addExpression(c,r+1),r=o}}else{if(t[r].is(_expression.ExpressionEntity.Comma)){if(r<i-1&&(_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,i,n),s>0&&t[s-1].isOneOfEntities([_expression.ExpressionEntity.ReturnKeyword,_expression.ExpressionEntity.AssignmentOperator])&&!_classPrivateMethodGet(this,_isExpressionInGroup,_isExpressionInGroup2).call(this,t,r))){var p=_expression.Expression.create(_expression.ExpressionEntity.TupleDefinition,t[s].getLineNumber(),t[s].getLocalIndex(),_classPrivateMethodGet(this,_getGroupText,_getGroupText2).call(this,t,s,i-1));e.overwrite(p,s)}break}if(r>0&&t[r].is(_expression.ExpressionEntity.OpenParenthesis)){var _=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,r);if(t[r-1].is(_expression.ExpressionEntity.FunctionName)||t[r-1].isOneOfCategories([_expression.ExpressionCategory.BuiltInMethods,_expression.ExpressionCategory.BuiltInFunctions,_expression.ExpressionCategory.OtherMethods,_expression.ExpressionCategory.MagicMethods,_expression.ExpressionCategory.ImportedEntities,_expression.ExpressionCategory.ModuleFunctions,_expression.ExpressionCategory.Unknown]))_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,_,t[r-1]),r=_;else{for(var h=!1,d=r+1;d<_;d++)if(t[d].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.OpenBrace]))d=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,d);else if(t[d].is(_expression.ExpressionEntity.Comma)){var x=_expression.Expression.create(_expression.ExpressionEntity.TupleDefinition,t[r].getLineNumber(),t[r].getLocalIndex(),_classPrivateMethodGet(this,_getGroupText,_getGroupText2).call(this,t,r,_));e.addExpression(x,r),_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,_,x,!0),r=_,h=!0;break}if(!h){var u=_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,_,n,!0),g=new _expression.Expression(t[r].getEntity(),t[r].getCategory(),t[r].getLineNumber(),t[r].getLocalIndex(),u.toString(),u.getEvaluatedType());u.addObserver(g),e.addExpression(g,r),r=_}}}else if(r>0&&t[r].is(_expression.ExpressionEntity.OpenSquareBracket)){var E=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,r);if(t[r-1].isOneOfEntities([_expression.ExpressionEntity.VariableName,_expression.ExpressionEntity.PropertyName,_expression.ExpressionEntity.CloseParenthesis])){var f=_classPrivateMethodGet(this,_getIndexOfEntity,_getIndexOfEntity2).call(this,t,_expression.ExpressionEntity.Colon,r),y=_expression.ExpressionEntity.IndexKey;f>r&&f<E&&(y=_expression.ExpressionEntity.Slice),_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,E,t[r],!0);var m=_expression.Expression.create(y,t[r].getLineNumber(),t[r].getLocalIndex(),_classPrivateMethodGet(this,_getGroupText,_getGroupText2).call(this,t,r,E));e.addExpression(m,r),r=E}else{var v=_expression.Expression.create(_expression.ExpressionEntity.ListDefinition,t[r].getLineNumber(),t[r].getLocalIndex(),_classPrivateMethodGet(this,_getGroupText,_getGroupText2).call(this,t,r,E));v.setUsedBy(n),e.addExpression(v,r),_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,E,v,!0),r=E}}else if(t[r].is(_expression.ExpressionEntity.OpenBrace)){var I=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,r),k=_classPrivateMethodGet(this,_getIndexOfEntity,_getIndexOfEntity2).call(this,t,_expression.ExpressionEntity.Colon,r),P=k>r&&k<I||I-r==1?_expression.ExpressionEntity.DictDefinition:_expression.ExpressionEntity.SetDefinition,F=_expression.Expression.create(P,t[r].getLineNumber(),t[r].getLocalIndex(),_classPrivateMethodGet(this,_getGroupText,_getGroupText2).call(this,t,r,I));F.setUsedBy(n),e.addExpression(F),_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,I,F,!0),r=I}else if(r>0&&t[r].is(_expression.ExpressionEntity.IfDefinition)){var S=_classPrivateMethodGet(this,_getIndexOfEntity,_getIndexOfEntity2).call(this,t,_expression.ExpressionEntity.ElseDefinition,r),L=S>0?_classPrivateMethodGet(this,_getIndexOfEntity,_getIndexOfEntity2).call(this,t,_expression.ExpressionEntity.ForDefinition,S):-1;if(S>0&&S<i-1){_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,r+1,S,t[r]);var C=_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,S+1,-1===L?i:L,n);e.getEvaluatedType()!==C.getEvaluatedType()&&(e.getEvaluatedType()!==_expression.DataType.Float&&e.getEvaluatedType()!==_expression.DataType.Int&&e.getEvaluatedType()!==_expression.DataType.Number||C.getEvaluatedType()!==_expression.DataType.Float&&C.getEvaluatedType()!==_expression.DataType.Int&&C.getEvaluatedType()!==_expression.DataType.Number?e.sendUpdate(_expression.DataType.Unknown):e.sendUpdate(_expression.DataType.Number)),L>S&&_classPrivateMethodGet(this,_processNestedCompoundExpression,_processNestedCompoundExpression2).call(this,e,t,L+1,i,t[L]),r=t.length}}else 0===r&&t[r].isOneOfEntities([_expression.ExpressionEntity.WhileDefinition,_expression.ExpressionEntity.ForDefinition,_expression.ExpressionEntity.IfDefinition,_expression.ExpressionEntity.ElifDefinition])&&(n=t[r])}}function _processNestedCompoundExpression2(e,t,s,i,n){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=new _compoundExpression.CompoundExpression(r);return e.getNestedCompoundExpressions().push(o),_classPrivateMethodGet(this,_buildCompoundExpression,_buildCompoundExpression2).call(this,o,t,s,i,n),o}function _updateCurrentBlock2(e,t){if(e.isBlockDefinition())return _classPrivateMethodGet(this,_processNewBlock,_processNewBlock2).call(this,e,t);for(;!e.isBlank()&&t.getIndentation()>=e.getIndent()&&(!e.containsMultipleLines()||!e.isFullyProcessed());){var s=t.getParentBlock();t=void 0!==s?s:_classPrivateFieldGet(this,_documentRoot)}return t}function _processNewBlock2(e,t){var s=e.getExpressions()[0].getEntity(),i=new _block.Block(s,void 0,e.getLineNumber(),e.getIndent());if(i.getIndentation()===t.getIndentation())t.getParentBlock().addChildBlock(i),(t.getBlockEntity()!==_expression.ExpressionEntity.IfDefinition&&t.getBlockEntity()!==_expression.ExpressionEntity.ElifDefinition||i.getBlockEntity()!==_expression.ExpressionEntity.ElifDefinition&&i.getBlockEntity()!==_expression.ExpressionEntity.ElseDefinition)&&(t.getBlockEntity()!==_expression.ExpressionEntity.TryDefinition||i.getBlockEntity()!==_expression.ExpressionEntity.ExceptDefinition)||t.addAlternate(i);else if(i.getIndentation()>t.getIndentation())t.addChildBlock(i);else{for(var n=t.getParentBlock();void 0!==n&&n.getIndentation()>=i.getIndentation();)n=n.getParentBlock();var r=n.getChildBlocks();n.addChildBlock(i),i.getBlockEntity()!==_expression.ExpressionEntity.ElifDefinition&&i.getBlockEntity()!==_expression.ExpressionEntity.ElseDefinition||!(r.length>1)||r[r.length-2].getBlockEntity()!==_expression.ExpressionEntity.IfDefinition&&r[r.length-2].getBlockEntity()!==_expression.ExpressionEntity.ElifDefinition||r[r.length-2].addAlternate(i)}return i}function _processModules2(e){var t,s=_createForOfIteratorHelper(e.getModules().entries());try{for(s.s();!(t=s.n()).done;){var i=_slicedToArray(t.value,2),n=i[0],r=i[1];_classPrivateFieldGet(this,_modules).set(n,r)}}catch(e){s.e(e)}finally{s.f()}}function _trackFunctionsAndVariables2(e){for(var t,s=[],i=[],n=0;n<e.length;n++){var r=e[n];if(r.isUnfinished())break;r.checkForSymptoms(),_classPrivateMethodGet(this,_processModules,_processModules2).call(this,r),_classPrivateMethodGet(this,_processLineSymptoms,_processLineSymptoms2).call(this,r);var o=r.getExpressions();r.isFunctionDefinition()?(void 0!==t&&_classPrivateMethodGet(this,_completeUserDefinedFunction,_completeUserDefinedFunction2).call(this,t),t=_classPrivateMethodGet(this,_trackNewFunction,_trackNewFunction2).call(this,o,r)):(r.isConditionalDefinition()&&_classPrivateMethodGet(this,_processConditional,_processConditional2).call(this,r.getFirstExpression(),n),r.getBlock().getScope().getBlockEntity()===_expression.ExpressionEntity.DocumentDefinition?s.push(n):i.push(n),_classPrivateMethodGet(this,_processFunctionCalls,_processFunctionCalls2).call(this,r.getFunctionCalls()),_classPrivateMethodGet(this,_processBuiltIns,_processBuiltIns2).call(this,r),_classPrivateMethodGet(this,_processOtherIdentifiers,_processOtherIdentifiers2).call(this,r.getOtherIdentifiers()),void 0===t||r.isBlank()?void 0!==t&&n===e.length-1&&_classPrivateMethodGet(this,_completeUserDefinedFunction,_completeUserDefinedFunction2).call(this,t):t.getBlock().hasChild(r.getBlock())?(t.addLine(r),r.indexOfEntity(_expression.ExpressionEntity.ReturnKeyword)>=0?_classPrivateMethodGet(this,_updateReturnType,_updateReturnType2).call(this,r,t):r.indexOfEntity(_expression.ExpressionEntity.BreakKeyword)>=0&&t.addExitBlock(r.getBlock())):(_classPrivateMethodGet(this,_completeUserDefinedFunction,_completeUserDefinedFunction2).call(this,t),t=void 0))}_classPrivateMethodGet(this,_trackVariables,_trackVariables2).call(this,s.concat(i))}function _checkForVariablesWithTypeNames2(e){for(var t=e.getExpressions(),s=e.getBlock().getScope(),i=0;i<t.length;i++)if(t[i].is(_expression.ExpressionCategory.Types)&&!t[i].isOneOfEntities([_expression.ExpressionEntity.TrueType,_expression.ExpressionEntity.FalseType,_expression.ExpressionEntity.NoneType])){var n=t[i].getValue();if(_classPrivateFieldGet(this,_variables).has(n)){var r,o=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).get(n));try{for(o.s();!(r=o.n()).done;){r.value.getScope()===s&&t[i].convert(_expression.ExpressionEntity.VariableName,_expression.ExpressionCategory.Identifiers,_expression.DataType.Unknown),e.insertVariableUsage(t[i],i)}}catch(e){o.e(e)}finally{o.f()}}}}function _trackVariables2(e){var t,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var i=t.value,n=_classPrivateFieldGet(this,_executionLines)[i];if(n.isUnfinished())break;_classPrivateMethodGet(this,_checkForVariablesWithTypeNames,_checkForVariablesWithTypeNames2).call(this,n);var r=n.getExpressions();_classPrivateMethodGet(this,_processVariables,_processVariables2).call(this,n.getVariableUsages(),n,i);var o=n.indexOfEntity(_expression.ExpressionEntity.F);if(o>=0)for(var a=o;a<r.length-1;a++)r[a].is(_expression.ExpressionEntity.F)&&r[a+1].is(_expression.ExpressionEntity.StringLiteral)&&(_classPrivateMethodGet(this,_processFString,_processFString2).call(this,r[a+1].getValue(),n.getBlock()),a++)}}catch(e){s.e(e)}finally{s.f()}}function _processOtherIdentifiers2(e){var t,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;_classPrivateFieldGet(this,_otherIdentifiers).add(i)}}catch(e){s.e(e)}finally{s.f()}}function _isOverriden2(e){return _classPrivateFieldGet(this,_userDefinedFunctions).has(e.name)}function _convertToUserDefinedFuncCall2(e,t){var s,i=e.getExpressions(),n=new Map,r=_createForOfIteratorHelper(t);try{for(r.s();!(s=r.n()).done;){var o=s.value,a=i[o];a.convert(_expression.ExpressionEntity.FunctionName,_expression.ExpressionCategory.Identifiers),n.has(a.getValue())||n.set(a.getValue(),[]);var l=new _identifiers.FunctionUsage(a.getLineNumber(),o);n.get(a.getValue()).push(l)}}catch(e){r.e(e)}finally{r.f()}_classPrivateMethodGet(this,_processFunctionCalls,_processFunctionCalls2).call(this,n)}function _processBuiltIns2(e){var t,s=_createForOfIteratorHelper(e.getBuiltInCalls());try{for(s.s();!(t=s.n()).done;){var i=t.value;if(_classPrivateMethodGet(this,_isOverriden,_isOverriden2).call(this,i)){var n=e.getSequencesOfPattern([[i]]).flatMap((function(e){return e}));_classPrivateMethodGet(this,_convertToUserDefinedFuncCall,_convertToUserDefinedFuncCall2).call(this,e,n)}else;}}catch(e){s.e(e)}finally{s.f()}}function _processLineSymptoms2(e){var t=e.getSymptoms();t.length>0&&_classPrivateFieldSet(this,_symptoms,_classPrivateFieldGet(this,_symptoms).concat(t))}function _processFString2(e,t){var s,i=/[ :]/,n=/([a-zA-Z_][a-zA-Z_0-9]*)/g,r=_createForOfIteratorHelper(_toConsumableArray(e.matchAll(/{([^}]+)}/g)));try{for(r.s();!(s=r.n()).done;){var o,a=_createForOfIteratorHelper(s.value[1].split(i));try{for(a.s();!(o=a.n()).done;){var l=o.value,c=_toConsumableArray(l.matchAll(n));if(1===c.length&&l===c[0][1]&&_classPrivateFieldGet(this,_variables).has(c[0][1])){var p,_=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).get(c[0][1]));try{for(_.s();!(p=_.n()).done;){var h=p.value;h.getScope().hasChild(t)&&h.usedInFString()}}catch(e){_.e(e)}finally{_.f()}}}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}}function _completeUserDefinedFunction2(e){var t=e.getLines(),s=t[t.length-1];if(-1===s.indexOfEntity(_expression.ExpressionEntity.ReturnKeyword)||0===e.getReturnTypes().length)e.addReturnLine(s);else if(s.getBlock()!==t[0].getBlock()){for(var i=!1,n=s.getBlock();n!==t[0].getBlock();){if(_classPrivateMethodGet(this,_hasBranchWithoutReturn,_hasBranchWithoutReturn2).call(this,n,e)){i=!0;break}var r=n.getParentBlock();if(void 0===r)break;n=r}i&&e.addBranchWithNoReturn()}}function _hasBranchWithoutReturn2(e,t){var s=e.getBlockEntity();if(s===_expression.ExpressionEntity.IfDefinition||s===_expression.ExpressionEntity.ElifDefinition||s===_expression.ExpressionEntity.ForDefinition||s===_expression.ExpressionEntity.WhileDefinition)return!0;if(s===_expression.ExpressionEntity.ElseDefinition){var i,n=e.getAlternateBranches(),r=_createForOfIteratorHelper(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!t.hasReturnInBlock(o))return!0}}catch(e){r.e(e)}finally{r.f()}return!(n.size>0)}return!1}function _processFunctionCalls2(e){var t,s=_createForOfIteratorHelper(e.keys());try{for(s.s();!(t=s.n()).done;){var i=t.value,n=_classPrivateFieldGet(this,_userDefinedFunctions).get(i);if(void 0===n){var r=!1;if(_classPrivateFieldGet(this,_variables).has(i)&&1===_classPrivateFieldGet(this,_variables).get(i).filter((function(e){return e.isImport()})).length){var o,a=_classPrivateFieldGet(this,_variables).get(i).filter((function(e){return e.isImport()}))[0],l=_createForOfIteratorHelper(e.get(i));try{for(l.s();!(o=l.n()).done;){var c=o.value,p=this.getExecutionLineContainingExpression(i,c.getLineNumber(),c.getIndex()),_=p.getExpressionOnLine(c.getLineNumber(),c.getIndex());a.addUsage(new _identifiers.VariableUsage(c.getIndex(),c.getLineNumber(),p.getDocumentStartingIndex()+_.getLocalIndex(),_expression.DataType.Unknown)),_.convert(_expression.ExpressionEntity.Unknown,_expression.ExpressionCategory.Unknown,_expression.DataType.Unknown)}}catch(e){l.e(e)}finally{l.f()}r=!0;continue}var h,d=_createForOfIteratorHelper(_classPrivateFieldGet(this,_modules));try{for(d.s();!(h=d.n()).done;){var x=_slicedToArray(h.value,2);x[0];if(x[1].hasDirectImport(i)){var u,g=_createForOfIteratorHelper(e.get(i));try{for(g.s();!(u=g.n()).done;){var E=u.value;this.getExecutionLineContainingExpression(i,E.getLineNumber(),E.getIndex()).getExpressionOnLine(E.getLineNumber(),E.getIndex()).convert(_expression.ExpressionEntity.NamedImport,_expression.ExpressionCategory.ImportedEntities,_expression.DataType.Unknown)}}catch(e){g.e(e)}finally{g.f()}r=!0}}}catch(e){d.e(e)}finally{d.f()}r||(_classPrivateFieldGet(this,_untrackedFunctions).has(i)||_classPrivateFieldGet(this,_untrackedFunctions).set(i,new _identifiers.UserDefinedFunction(i)),n=_classPrivateFieldGet(this,_untrackedFunctions).get(i))}if(n){n.addMultipleFunctionCalls(e.get(i));var f,y=_createForOfIteratorHelper(e.get(i));try{for(y.s();!(f=y.n()).done;){var m=f.value,v=this.getExecutionLineContainingExpression(i,m.getLineNumber(),m.getIndex());if(void 0!==v){var I=v.getExpressionOnLine(m.getLineNumber(),m.getIndex());n.getReturnTypes().length>0&&I.typeUpdateReceived(1===n.getReturnTypes().length?n.getReturnTypes()[0]:_expression.DataType.Unknown),n.addObserver(I,n.getAggregateReturnType())}}}catch(e){y.e(e)}finally{y.f()}}}}catch(e){s.e(e)}finally{s.f()}}function _updateReturnType2(e,t){t.addReturnLine(e),e.getCompoundExpression().addObserver(t),t.addExitBlock(e.getBlock())}function _processVariables2(e,t,s){var i,n=_createForOfIteratorHelper(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.setExecutionLineNumber(s),void 0!==t){var o=t.getExpressionOnLine(r.getLineNumber(),r.getIndex()),a=o.getValue(),l=t.convertLineIndexToLocalIndex(r.getLineNumber(),r.getIndex()),c=t.isVariableAssigned(r),p=t.isVariableIncremented(r),_=o.getEntity()===_expression.ExpressionEntity.ModuleName||o.getCategory()===_expression.ExpressionCategory.BuiltInModules,h=!_&&_classPrivateMethodGet(this,_isNamedImport,_isNamedImport2).call(this,a);if((c||p)&&r.setValueIsAssigned(),_){var d=_classPrivateMethodGet(this,_makeVariable,_makeVariable2).call(this,a,r,t);d.setIsImport(),r.setType(o.getDataType()),d.addUsage(r)}else{if(h){var x=(0,_expression.keywordLookup)(a),u=x.entity===_expression.ExpressionEntity.Unknown?_expression.ExpressionEntity.NamedImport:x.entity,g=x.category===_expression.ExpressionCategory.Unknown?_expression.ExpressionCategory.ImportedEntities:x.category;o.convert(u,g,u!==_expression.ExpressionEntity.Unknown&&_expression.builtInReturnLookup.has(u)?_expression.builtInReturnLookup.get(u):_expression.DataType.Unknown);break}if(t.isPrintVariable(l))o.convert("sep"===a?_expression.ExpressionEntity.Sep:_expression.ExpressionEntity.End,_expression.ExpressionCategory.SpecialVariables,_expression.DataType.String);else{var E=_classPrivateMethodGet(this,_makeVariable,_makeVariable2).call(this,a,r,t),f=t.getExpressions();if(c)l+1<f.length&&f[l+1].is(_expression.ExpressionEntity.Comma)||l>0&&f[l-1].is(_expression.ExpressionEntity.Comma)&&!t.isExpressionInFunctionCall(l)?_classPrivateMethodGet(this,_processMultiAssignValue,_processMultiAssignValue2).call(this,r,f,l,t):(l+1<f.length-1&&f[l+1].is(_expression.ExpressionEntity.AssignmentOperator)&&f[l+2].getDataType()!==_expression.DataType.NA&&r.setType(f[l+2].getDataType()),t.getCompoundExpression().addObserver(r));else if(l>0&&f[l-1].is(_expression.ExpressionEntity.AsKeyword)&&f[0].is(_expression.ExpressionEntity.WithKeyword))r.setType(f[1].getDataType()),f[1].addObserver(r);else{var y=E.getLastUsageBefore(r,_classPrivateFieldGet(this,_executionLines));r.addPreviousUsages(y)}E.addUsage(r)}}}}}catch(e){n.e(e)}finally{n.f()}}function _processMultiAssignValue2(e,t,s,i){for(var n=i.indexOfEntity(_expression.ExpressionEntity.AssignmentOperator),r=s/2,o=i.getSequencesOfPattern([[_expression.ExpressionEntity.VariableName],[_expression.ExpressionEntity.Comma]],n).length+1,a=[],l=n+1,c=n+1;c<t.length;c++)c===l&&a.push([l]),c===t.length-1?a[a.length-1].push(c):t[c].is(_expression.ExpressionEntity.Comma)?(a[a.length-1].push(c-1),l=c+1):t[c].isOneOfEntities([_expression.ExpressionEntity.OpenBrace,_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket])&&(c=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,c))===t.length-1&&a[a.length-1].push(c);if(a.length!==o)e.setType(_expression.DataType.Unknown);else{var p=a[r];if(p[1]===p[0])e.setType(t[p[0]].getDataType()),t[p[0]].is(_expression.ExpressionCategory.Literals)||t[p[0]].addObserver(e);else{var _=new _compoundExpression.CompoundExpression;i.getCompoundExpression().getNestedCompoundExpressions().push(_),_classPrivateMethodGet(this,_buildCompoundExpression,_buildCompoundExpression2).call(this,_,t,p[0],p[1]+1,t[n]),e.setType(_.getEvaluatedType()),_.addObserver(e)}}}function _makeVariable2(e,t,s){var i=_classPrivateMethodGet(this,_checkIfForLoopVariable,_checkIfForLoopVariable2).call(this,t,s),n=i&&s.isExpressionInGroup(s.convertLineIndexToLocalIndex(t.getLineNumber(),t.getIndex())),r=!i&&s.indexOfEntity(_expression.ExpressionEntity.GlobalKeyword)>=0,o=n?_classPrivateMethodGet(this,_getExistingListCompVariable,_getExistingListCompVariable2).call(this,e,s.getFirstExpression().getLineNumber()):_classPrivateMethodGet(this,_getExistingVariable,_getExistingVariable2).call(this,e,t,s.getBlock(),s.isVariableAssigned(t)||i,r),a=s.getBlock(),l=s.getExpressionOnLine(t.getLineNumber(),t.getIndex());if(i&&n){var c=new _block.Block(_expression.ExpressionEntity.ListComprehension,s.getBlock(),s.getFirstExpression().getLineNumber());a.addChildBlock(c),a=c}return _classPrivateFieldGet(this,_variables).has(e)?void 0===o&&_classPrivateFieldGet(this,_variables).has(e)&&(o=new _identifiers.Variable(e,t.getLineNumber(),t.getIndex(),t.getDocIndex(),a),_classPrivateMethodGet(this,_checkForFunctionsWithSameNameAsVar,_checkForFunctionsWithSameNameAsVar2).call(this,e,t,a.getId(),l),_classPrivateFieldGet(this,_variables).get(e).push(o)):(o=new _identifiers.Variable(e,t.getLineNumber(),t.getIndex(),t.getDocIndex(),a),_classPrivateMethodGet(this,_checkForFunctionsWithSameNameAsVar,_checkForFunctionsWithSameNameAsVar2).call(this,e,t,a.getId(),l),_classPrivateFieldGet(this,_variables).set(e,[o])),o}function _checkIfForLoopVariable2(e,t){var s=t.convertLineIndexToLocalIndex(e.getLineNumber(),e.getIndex()),i=t.getExpressions();if(s>0&&s<i.length){if(i[s-1].is(_expression.ExpressionEntity.ForDefinition))return!0;if(i[s-1].is(_expression.ExpressionEntity.Comma)&&s>2&&i[s-3].is(_expression.ExpressionEntity.ForDefinition))return!0;var n,r=t.getSequencesOfPattern([[_expression.ExpressionEntity.ForDefinition]]),o=i[s].getValue(),a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var l=n.value,c=_classPrivateMethodGet(this,_getContentsOfGroup,_getContentsOfGroup2).call(this,i,l[0]);if(2===c.length&&c[0]<=s&&c[1]>=s&&(i[l[0]+1].getValue()===o||l[0]+3<c[1]&&i[l[0]+2].is(_expression.ExpressionEntity.Comma)&&i[l[0]+3].getValue()===o)){var p=i.slice(l[0],l[1]+1).map((function(e){return e.getEntity()})),_=p.indexOf(_expression.ExpressionEntity.InKeyword),h=p.indexOf(_expression.ExpressionEntity.IfDefinition);if(_>-1&&s>_&&(-1===h||h>s))continue;return!0}}}catch(e){a.e(e)}finally{a.f()}}return!1}function _getExistingListCompVariable2(e,t){if(_classPrivateFieldGet(this,_variables).has(e))for(var s=_classPrivateFieldGet(this,_variables).get(e),i=s.length-1;i>=0;i--){var n=s[i].getScope();if(n.getBlockEntity()===_expression.ExpressionEntity.ListComprehension&&n.getStartLine()===t)return s[i]}}function _getExistingVariable2(e,t,s,i,n){if(_classPrivateFieldGet(this,_variables).has(e)){for(var r=_classPrivateFieldGet(this,_variables).get(e),o=[],a=r.length-1;a>=0;a--){var l=s.stepsToParentBlockOfEntity(_expression.ExpressionEntity.FunctionDefinition),c=r[a].getScope().getBlockEntity()===_expression.ExpressionEntity.DocumentDefinition&&l>-1;if(r[a].getScope().hasChild(s)){if(c&&i&&!n){if(l>-1)for(var p=s.getNearestParentOfAny([_expression.ExpressionEntity.FunctionDefinition]),_=r[a].getUsages(),h=_.length-1;h>=0&&!(_[h].getLineNumber()<=p.getStartLine());h--)if(_[h].getLineNumber()<=t.getLineNumber()&&p.hasChild(s))return r[a];continue}o.push(a)}}if(1===o.length)return r[o[0]];if(o.length>1){var d,x=-1,u=-1,g=_createForOfIteratorHelper(o);try{for(g.s();!(d=g.n()).done;){var E=d.value,f=s.stepsToParentBlockOfEntity(r[E].getScope().getBlockEntity()),y=s.getNearestParentOfAny([r[E].getScope().getBlockEntity()]);f>-1&&(-1===u||f<u)&&y===r[E].getScope()&&(u=f,x=E)}}catch(e){g.e(e)}finally{g.f()}if(x>=0)return r[x]}}}function _processConditional2(e,t){if(e.is(_expression.ExpressionEntity.IfDefinition))_classPrivateFieldGet(this,_conditionals).push(new _conditional.Conditional(t));else if(e.isOneOfEntities([_expression.ExpressionEntity.ElifDefinition,_expression.ExpressionEntity.ElseDefinition])&&_classPrivateFieldGet(this,_conditionals).length>0){for(var s=_classPrivateFieldGet(this,_executionLines)[t].getBlock().getParentBlock(),i=_classPrivateFieldGet(this,_conditionals).length-1,n=_classPrivateFieldGet(this,_conditionals)[i];i>=0&&_classPrivateFieldGet(this,_executionLines)[n.getIfIndex()].getBlock().getParentBlock()!==s;)n=_classPrivateFieldGet(this,_conditionals)[i],i--;_classPrivateFieldGet(this,_executionLines)[n.getIfIndex()].getBlock().getParentBlock()===s&&n.addBranch(e.getEntity(),t)}}function _trackNewFunction2(e,t){var s=_classPrivateFieldGet(this,_untrackedFunctions).has(e[1].getValue())?_classPrivateFieldGet(this,_untrackedFunctions).get(e[1].getValue()):new _identifiers.UserDefinedFunction(e[1].getValue());_classPrivateFieldGet(this,_untrackedFunctions).has(e[1].getValue())&&_classPrivateFieldGet(this,_untrackedFunctions).delete(e[1].getValue()),s.addLine(t),_classPrivateFieldGet(this,_userDefinedFunctions).set(s.getName(),s);for(var i=2;i<e.length;i++)if(e[i].getEntity()===_expression.ExpressionEntity.VariableName||e[i].isOneOfEntities([_expression.ExpressionEntity.StrType,_expression.ExpressionEntity.IntType,_expression.ExpressionEntity.FloatType,_expression.ExpressionEntity.BoolType,_expression.ExpressionEntity.ListType,_expression.ExpressionEntity.SetType,_expression.ExpressionEntity.TupleType,_expression.ExpressionEntity.DictType])){e[i].getEntity()!==_expression.ExpressionEntity.VariableName&&e[i].convert(_expression.ExpressionEntity.VariableName,_expression.ExpressionCategory.Identifiers,_expression.DataType.Unknown);var n=e[i].getValue();_classPrivateFieldGet(this,_variables).has(n)||_classPrivateFieldGet(this,_variables).set(n,[]);var r=_classPrivateMethodGet(this,_convertExecutionLineIndexToLineIndex,_convertExecutionLineIndexToLineIndex2).call(this,e,i),o=new _identifiers.Variable(n,e[i].getLineNumber(),r,t.getDocumentStartingIndex()+e[i].getLocalIndex(),t.getBlock(),!0);_classPrivateFieldGet(this,_variables).get(n).push(o),s.addParameter(o)}else if(e[i].getEntity()===_expression.ExpressionEntity.AssignmentOperator)s.addOptionalParameter();else if(e[i].getEntity()===_expression.ExpressionEntity.Colon&&e[i-1].getEntity()===_expression.ExpressionEntity.VariableName)for(i++;i<e.length&&!e[i].isOneOfEntities([_expression.ExpressionEntity.Colon,_expression.ExpressionEntity.CloseParenthesis]);)i++;else if(e[i].getEntity()===_expression.ExpressionEntity.TypeHintReturn)break;return s}function _isNamedImport2(e){var t,s=_createForOfIteratorHelper(_classPrivateFieldGet(this,_modules).values());try{for(s.s();!(t=s.n()).done;){if(t.value.hasDirectImport(e))return!0}}catch(e){s.e(e)}finally{s.f()}}function _getIndexOfEntity2(e,t){for(var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s<e.length;s++)if(e[s].is(t))return s;return-1}function _convertExecutionLineIndexToLineIndex2(e,t){if(-1===t||e.length<=1||e[0].getLineNumber()===e[e.length-1].getLineNumber())return t;var s,i=e[t].getLineNumber(),n=_createForOfIteratorHelper(e);try{for(n.s();!(s=n.n()).done;){if(s.value.getLineNumber()===i)break;t--}}catch(e){n.e(e)}finally{n.f()}return t}function _getGroupText2(e,t,s){for(var i="",n=t;n<=s;n++)i+=e[n].getValue();return i}function _findEndOfBooleanClause2(e,t){for(var s=t;s<e.length;s++){var i=e[s];if(i.isOneOfEntities([_expression.ExpressionEntity.AndOperator,_expression.ExpressionEntity.OrOperator,_expression.ExpressionEntity.Colon,_expression.ExpressionEntity.Comma]))return s-1;i.isOneOfEntities([_expression.ExpressionEntity.OpenBrace,_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket])&&(s=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,s))}return e.length-1}function _separateBooleanExpressionClauses2(e){for(var t=[],s=0;s<e.length;){var i=_classPrivateMethodGet(this,_findEndOfBooleanClause,_findEndOfBooleanClause2).call(this,e,s);t.push(e.slice(s,i+1)),s=i+2}return t}function _findClosingExpression2(e,t){var s=e[t].getEntity();if(s!==_expression.ExpressionEntity.OpenParenthesis&&s!==_expression.ExpressionEntity.OpenSquareBracket&&s!==_expression.ExpressionEntity.OpenBrace)return-1;for(var i=_classPrivateMethodGet(this,_getClosingBracket,_getClosingBracket2).call(this,s),n=1,r=t+1;r<e.length;r++)if(e[r].getEntity()===s)n++;else if(e[r].getEntity()===i&&0===--n)return r;return e.length-1}function _getClosingBracket2(e){switch(e){case _expression.ExpressionEntity.OpenParenthesis:return _expression.ExpressionEntity.CloseParenthesis;case _expression.ExpressionEntity.OpenSquareBracket:return _expression.ExpressionEntity.CloseSquareBracket;case _expression.ExpressionEntity.OpenBrace:return _expression.ExpressionEntity.CloseBrace;default:return _expression.ExpressionEntity.Unknown}}function _getContentsOfGroup2(e,t){for(var s=function(e,t){return e>t},i=0,n=0,r=0,o=0,a=0,l=0,c=t-1;c>=0;c--)if(e[c].is(_expression.ExpressionEntity.OpenParenthesis)){if(s(++i,n))return[c+1,_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,c)-1]}else if(e[c].is(_expression.ExpressionEntity.CloseParenthesis))n++;else if(e[c].is(_expression.ExpressionEntity.OpenSquareBracket)){if(s(++r,o))return[c+1,_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,c)-1]}else if(e[c].is(_expression.ExpressionEntity.CloseSquareBracket))o++;else if(e[c].is(_expression.ExpressionEntity.OpenBrace)){if(s(++a,l))return[c+1,_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,c)-1]}else e[c].is(_expression.ExpressionEntity.CloseBrace)&&l++;return[]}function _isExpressionInGroup2(e,t){return _classPrivateMethodGet(this,_getContentsOfGroup,_getContentsOfGroup2).call(this,e,t).length>0}function _findMatchingVariable2(e){if(_classPrivateFieldGet(this,_variables).has(e.getValue())){var t,s=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).get(e.getValue()));try{for(s.s();!(t=s.n()).done;){var i=t.value;if(i.hasMatchingUsage(e.getLineNumber()))return i}}catch(e){s.e(e)}finally{s.f()}}}function _getMatchingVariableUsage2(e,t){if(_classPrivateFieldGet(this,_variables).has(e.getValue())){var s,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).get(e.getValue()));try{for(i.s();!(s=i.n()).done;){var n,r=_createForOfIteratorHelper(s.value.getUsages());try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.getLineNumber()===e.getLineNumber()&&o.getIndex()===t)return o}}catch(e){r.e(e)}finally{r.f()}}}catch(e){i.e(e)}finally{i.f()}}}function _matchComponents2(e,t){var s,i=_createForOfIteratorHelper(e);try{for(i.s();!(s=i.n()).done;){var n,r=s.value,o=!1,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var l=n.value;if(_classPrivateMethodGet(this,_sequenceInComponent,_sequenceInComponent2).call(this,r,l)){o=!0;break}}}catch(e){a.e(e)}finally{a.f()}if(!o)return!1}}catch(e){i.e(e)}finally{i.f()}return!0}function _sequenceInComponent2(e,t){if(0===e.length||0===t.length)return!1;if(3===e.length&&3===t.length)return _classPrivateMethodGet(this,_matchSimpleSequence,_matchSimpleSequence2).call(this,e,t);var s=0,i=0;if(e.length===t.length)for(var n=0;n<e.length;n++)if(e[n].expressions.length===t[n].expressions.length)for(var r=0;r<e[n].expressions.length;r++){var o=_classPrivateMethodGet(this,_compareExpressions,_compareExpressions2).call(this,e[n].expressions[r],t[n].expressions[r]);o===_constants.EXACT_MATCH||o===e[n].matchTypes[r]?s++:i++}return s>0&&0===i}function _matchSimpleSequence2(e,t){if(1!==e[1].expressions.length||1!==t[1].expressions.length)return!1;var s=_classPrivateMethodGet(this,_compileExpressionComparisons,_compileExpressionComparisons2).call(this,e[0].expressions,e[0].matchTypes,t[0].expressions),i=_classPrivateMethodGet(this,_compileExpressionComparisons,_compileExpressionComparisons2).call(this,e[2].expressions,e[2].matchTypes,t[2].expressions);return e[1].expressions[0].is(_expression.ExpressionCategory.ComparisonOperators)&&t[1].expressions[0].is(_expression.ExpressionCategory.ComparisonOperators)?s===_constants.EXACT_MATCH||i===_constants.EXACT_MATCH:!(!e[1].expressions[0].is(_expression.ExpressionEntity.InKeyword)||!t[1].expressions[0].is(_expression.ExpressionEntity.InKeyword))&&(s===_constants.EXACT_MATCH&&i===_constants.EXACT_MATCH)}function _compileExpressionComparisons2(e,t,s){if(e.length!==s.length)return _constants.NO_MATCH;if(1===t.length){var i=_classPrivateMethodGet(this,_compareExpressions,_compareExpressions2).call(this,e[0],s[0]);return i===_constants.EXACT_MATCH||i===t[0]?t[0]:_constants.NO_MATCH}for(var n=0;n<e.length;n++){var r=_classPrivateMethodGet(this,_compareExpressions,_compareExpressions2).call(this,e[n],s[n]);if(r===_constants.NO_MATCH||r!==_constants.EXACT_MATCH&&r!==t[n])return _constants.NO_MATCH}return _constants.EXACT_MATCH}function _compareExpressions2(e,t){var s=e.getValue()===t.getValue(),i=e.getEntity()===t.getEntity(),n=e.getCategory()===t.getCategory();return s&&i&&n?_constants.EXACT_MATCH:n?_constants.MATCH_CATEGORY:_constants.NO_MATCH}function _identifyIfSequences2(){var e,t=new Set,s=new Map,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,_conditionals));try{for(i.s();!(e=i.n()).done;){var n=e.value;if(!(t.has(n.getIfIndex())||n.hasElifs()||n.hasElse()||_classPrivateFieldGet(this,_executionLines)[n.getIfIndex()].getBlock().isExitBlock())){s.has(n.getIfIndex())||s.set(n.getIfIndex(),[]);for(var r=n.getIfIndex();r<_classPrivateFieldGet(this,_executionLines).length-1;){for(var o=_classPrivateFieldGet(this,_executionLines)[r],a=_classPrivateMethodGet(this,_getIndexOfNextLineFollowingBlock,_getIndexOfNextLineFollowingBlock2).call(this,r),l=a-1;a<_classPrivateFieldGet(this,_executionLines).length&&_classPrivateFieldGet(this,_executionLines)[a].isBlank();)a++;var c=_classPrivateMethodGet(this,_getConditionalExpressions,_getConditionalExpressions2).call(this,r),p=_classPrivateMethodGet(this,_getComponents,_getComponents2).call(this,c);if(s.get(n.getIfIndex()).push({start:r,end:l,boolExpression:c,components:p}),!(a<_classPrivateFieldGet(this,_executionLines).length)||_classPrivateFieldGet(this,_executionLines)[a].isBlank()||_classPrivateFieldGet(this,_executionLines)[a].getBlock().getBlockEntity()!==_expression.ExpressionEntity.IfDefinition||o.getBlock().getParentBlock()!==_classPrivateFieldGet(this,_executionLines)[a].getBlock().getParentBlock()){s.get(n.getIfIndex()).length<2&&s.delete(n.getIfIndex());break}t.add(a),r=a}}t.add(n.getIfIndex())}}catch(e){i.e(e)}finally{i.f()}return s}function _getComponents2(e){var t,s=[],i=_createForOfIteratorHelper(_classPrivateMethodGet(this,_separateBooleanExpressionClauses,_separateBooleanExpressionClauses2).call(this,e));try{for(i.s();!(t=i.n()).done;){for(var n=t.value,r=[],o=0,a=0,l=0,c={expressions:[],matchTypes:[]},p=0;p<n.length;p++)if(n[p].isOneOfCategories([_expression.ExpressionCategory.ComparisonOperators,_expression.ExpressionCategory.MathsOperators,_expression.ExpressionCategory.Literals,_expression.ExpressionCategory.Types]))n[p].is(_expression.ExpressionCategory.ComparisonOperators)||n[p].is(_expression.ExpressionEntity.InKeyword)&&0===o&&0===a&&0===l?(r.push(c),r.push({expressions:[n[p]],matchTypes:[_constants.MATCH_CATEGORY]}),p<n.length-1&&(c={expressions:[],matchTypes:[]})):(c.expressions.push(n[p]),c.matchTypes.push(_constants.MATCH_CATEGORY));else{if(n[p].is(_expression.ExpressionEntity.NotOperator))continue;n[p].is(_expression.ExpressionEntity.OpenBrace)?o++:n[p].is(_expression.ExpressionEntity.OpenSquareBracket)?l++:n[p].is(_expression.ExpressionEntity.OpenParenthesis)?a++:n[p].is(_expression.ExpressionEntity.CloseBrace)?o--:n[p].is(_expression.ExpressionEntity.CloseSquareBracket)?l--:n[p].is(_expression.ExpressionEntity.CloseParenthesis)&&a--,n[p].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.CloseParenthesis])||(c.expressions.push(n[p]),c.matchTypes.push(_constants.EXACT_MATCH))}r.push(c),s.push(r)}}catch(e){i.e(e)}finally{i.f()}return s}function _getConditionalExpressions2(e){var t=_classPrivateFieldGet(this,_executionLines)[e];if(void 0===t)return[];var s=t.getExpressions(),i=t.indexOfEntity(_expression.ExpressionEntity.IfDefinition);if(i>=s.length-1)return[];for(var n=i+1,r=i+1;r<s.length;r++)if(s[r].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.OpenBrace]))r=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,s,r);else{if(s[r].is(_expression.ExpressionEntity.Colon)){n=r;break}r===s.length-1&&(n=r+1)}return s[i+1].is(_expression.ExpressionEntity.OpenParenthesis)&&_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,s,i+1)===n-1&&(i++,n--),s.slice(i+1,n)}function _summariseExpressions2(e,t,s){if(s<t||t>=e.length)return{type:_constants.EMPTY};if(s-t==0)return e[t].is(_expression.ExpressionEntity.VariableName)?{type:e[t].getEntity().name,value:e[t].getValue()}:{type:e[t].getEntity().name};if(e[t].is(_expression.ExpressionEntity.FunctionName)&&e.length>1){var i=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,t+1);if(i===s||i===s-1&&e[i+1].is(_expression.ExpressionCategory.Comment))return{type:e[t].getEntity().name,value:e[t].getValue()}}else if(e[t].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.OpenBrace])){var n=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,t);if(n===e.length||n===e.length-1&&e[n+1].is(_expression.ExpressionCategory.Comment))return{type:e[t].is(_expression.ExpressionEntity.OpenSquareBracket)?_expression.ExpressionEntity.ListDefinition.name:_constants.COMPOUND_EXPRESSION}}else for(var r=t;r<=s&&r<e.length;){if(e[r].isOneOfCategories([_expression.ExpressionCategory.ComparisonOperators,_expression.ExpressionCategory.LogicalOperators]))return{type:_constants.BOOLEAN_EXPRESSION};r++}return{type:_constants.COMPOUND_EXPRESSION}}function _getArgumentType2(e,t,s,i){var n=e.getCompoundExpression();if(i-s==2)return t[s+1].getDataType();var r=n.getTypesOfCompoundExpressionsBeginningAt(s+1);if(1===r.length)return r[0];if(r.length>1){for(var o=r[0],a=1;a<r.length;a++)if(r[a]!==o)return _expression.DataType.Unknown;return o}return _expression.DataType.Unknown}function _getSummaryOfContentInParentheses2(e,t,s){if(1===s-t-1){if(e[t+1].isOneOfCategories([_expression.ExpressionCategory.Literals,_expression.ExpressionCategory.Types]))return _constants.LITERAL;if(e[t+1].is(_expression.ExpressionEntity.VariableName))return _constants.VARIABLE}else{if((e[t+1].is(_expression.ExpressionCategory.BuiltInFunctions)||e[t+1].is(_expression.ExpressionEntity.FunctionName))&&e[t+2].is(_expression.ExpressionEntity.OpenParenthesis)){if(_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,t+2)===s-1)return _constants.FUNCTION_CALL}else if(e[t+1].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenBrace,_expression.ExpressionEntity.OpenSquareBracket])){var i=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,t+1);if(i===s){for(var n=t+2,r=!1;n<i;){if(e[n].is(_expression.ExpressionEntity.Comma)){r=!0;break}n++}return r?_constants.COMPOUND_TYPE_DEFINITION:_constants.COMPOUND_EXPRESSION}}else if(e[t+1].is(_expression.ExpressionEntity.VariableName)&&e[t+2].is(_expression.ExpressionEntity.OpenSquareBracket)){if(_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,e,t+2)===s)return _constants.VARIABLE}}return _constants.COMPOUND_EXPRESSION}function _getNumberOfArguments2(e,t){var s=e.getExpressions(),i=1;if(s[t+1].is(_expression.ExpressionEntity.OpenParenthesis)){var n=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,s,t+1);if(n-(t+1)==1)return 0;for(var r=t+2;r<n;r++)s[r].is(_expression.ExpressionEntity.Comma)?i++:s[r].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.OpenBrace])&&(r=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,s,r))}return i}function _isSubscriptable2(e){return e===_expression.DataType.Unknown||e===_expression.DataType.String||e===_expression.DataType.List||e===_expression.DataType.Tuple||e===_expression.DataType.Dict}function _compareValues2(e,t,s,i,n,r){if(s){var o=e.getIndex(),a=t.getExpressions(),l=i.getIndex(),c=n.getExpressions();if(_classPrivateMethodGet(this,_isAssignedLiteral,_isAssignedLiteral2).call(this,o,a)){var p=a[2].getDataType();try{var _=p===_expression.DataType.Int||p===_expression.DataType.Float||p===_expression.DataType.Number?parseFloat(a[2].getValue()):a[2].getValue();if(r){if(p!==_expression.DataType.Int&&p!==_expression.DataType.Float&&p!==_expression.DataType.Number)return _constants.UNKNOWN;if(_classPrivateMethodGet(this,_isForInRangeVar,_isForInRangeVar2).call(this,l,c)){for(var h=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,c,l+3),d=l+4,x=-1,u=1;d<h;)if(c[d].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.OpenBrace]))d=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,c,d);else{if(c[d].is(_expression.ExpressionEntity.Comma)){-1===x&&(x=d),u++;break}d++}if(1===u)return 0===_?_constants.SAME_VALUE:_constants.DIFFERENT_VALUE;if(x===l+5&&c[x-1].is(_expression.ExpressionCategory.Literals))return _===parseFloat(c[x-1])?_constants.SAME_VALUE:_constants.DIFFERENT_VALUE}else if(_classPrivateMethodGet(this,_isEnumerateIndexVar,_isEnumerateIndexVar2).call(this,l,c))return 0===_?_constants.SAME_VALUE:_constants.DIFFERENT_VALUE}else if(_classPrivateMethodGet(this,_isAssignedLiteral,_isAssignedLiteral2).call(this,l,c)){var g=c[2].getDataType();try{return _===(g===_expression.DataType.Int||g===_expression.DataType.Float||g===_expression.DataType.Number?parseFloat(c[2].getValue()):c[2].getValue())?_constants.SAME_VALUE:_constants.DIFFERENT_VALUE}catch(e){return _constants.UNKNOWN}}}catch(e){return _constants.UNKNOWN}}}return _constants.UNKNOWN}function _isEnumerateIndexVar2(e,t){return e+4<t.length&&t[e+1].is(_expression.ExpressionEntity.Comma)&&t[e+4].is(_expression.ExpressionEntity.EnumerateFunction)}function _isForInRangeVar2(e,t){return t.length>=e+3&&t[e+1].is(_expression.ExpressionEntity.InKeyword)&&t[e+2].is(_expression.ExpressionEntity.RangeFunction)&&t[e+3].is(_expression.ExpressionEntity.OpenParenthesis)}function _isAssignedLiteral2(e,t){return 0===e&&t.length>=3&&t[1].is(_expression.ExpressionEntity.AssignmentOperator)&&t[2].isOneOfCategories([_expression.ExpressionCategory.Literals,_expression.ExpressionCategory.Types])&&(3===t.length||t[3].is(_expression.ExpressionCategory.Comment))}function _isUndefined2(e,t){if(e.isParameter()||t.isVariableAssigned(e.getFirstUsage())||_classPrivateFieldGet(this,_otherIdentifiers).has(e.getName()))return!1;var s=t.convertLineIndexToLocalIndex(e.getFirstUsage().getLineNumber(),e.getFirstUsage().getIndex()),i=t.indexOfEntity(_expression.ExpressionEntity.ForDefinition),n=t.indexOfEntity(_expression.ExpressionEntity.InKeyword),r=t.indexOfEntity(_expression.ExpressionEntity.AsKeyword),o=t.indexOfEntity(_expression.ExpressionEntity.ImportKeyword),a=t.indexOfEntity(_expression.ExpressionEntity.FromKeyword),l=t.indexOfEntity(_expression.ExpressionEntity.LambdaDefinition),c=t.indexOfEntity(_expression.ExpressionEntity.Colon);if(i>-1&&n-s>0||r>-1&&s-r>0||o>-1&&s-o>0||a>-1&&s-a>0||l>-1&&s>l&&c>-1&&c>s)return!1;var p=t.getExpressions();if(t.isVariablePassedToFunction(e.getFirstUsage())&&s>=0&&s+1<p.length&&p[s+1].is(_expression.ExpressionEntity.AssignmentOperator))for(var _=0,h=0,d=s-1;d>=0;d--)if(p[d].is(_expression.ExpressionEntity.CloseParenthesis))_++;else if(p[d].is(_expression.ExpressionEntity.OpenParenthesis))h++;else if(p[d].is(_expression.ExpressionEntity.FunctionName)&&h>_&&_classPrivateFieldGet(this,_userDefinedFunctions).has(p[d].getValue())){var x,u=_createForOfIteratorHelper(_classPrivateFieldGet(this,_userDefinedFunctions).get(p[d].getValue()).getParameters());try{for(u.s();!(x=u.n()).done;){if(x.value.getName()===e.getName())return!1}}catch(e){u.e(e)}finally{u.f()}}return!0}function _isTypeVariable2(e){return"str"===e||"int"===e||"float"===e||"bool"===e||"list"===e||"set"===e||"dict"===e||"tuple"===e}function _buildBlockString2(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;void 0===i&&(i=_classPrivateFieldGet(this,_executionLines));for(var n=i[e].getText(!0),r=void 0!==s&&i[e].getDocumentLineNumber()===s.getStartLine(),o=void 0===s?void 0:r?s.getParentBlock():s,a=e+1;a<=t&&(void 0===o||o.hasChild(i[a].getBlock()));a++)i[a].getDocumentLineNumber()!==i[a-1].getDocumentLineNumber()&&(n+="\n"+i[a].getText(!0));return n}function _blockMatchesPattern2(e,t){var s=_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,e);return 2===s.length&&1===s[1].getSequencesOfPattern(t).length&&s[1].getExpressions().length===t.length}function _loopExits2(e){for(var t=1;t<e.length;t++)if(e[t].indexOfEntity(_expression.ExpressionEntity.ReturnKeyword)>=0||e[t].indexOfEntity(_expression.ExpressionEntity.BreakKeyword)>=0||e[t].indexOfEntity(_expression.ExpressionEntity.ExitFunction)>=0||e[t].indexOfEntity(_expression.ExpressionEntity.QuitFunction)>=0)return!0;return!1}function _getLoopVars2(e){for(var t=e.getExpressions(),s=1,i=[],n=new Set;s<t.length&&(!t[s].is(_expression.ExpressionEntity.Colon)||t[s].is(_expression.ExpressionEntity.Colon)&&_classPrivateMethodGet(this,_isExpressionInGroup,_isExpressionInGroup2).call(this,t,s));)t[s].is(_expression.ExpressionEntity.VariableName)&&!n.has(t[s].getValue())&&(i.push(t[s]),n.add(t[s].getValue())),s++;return i}function _getBlocksWithinParent2(e,t){var s,i=[],n=_createForOfIteratorHelper(t);try{var r=function(){var t=s.value,n=e.filter((function(e){return t.hasChild(e.getBlock())}));i.push(n)};for(n.s();!(s=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}return i}function _isVarModified2(e,t){var s,i=_createForOfIteratorHelper(e.getUsages().filter((function(e){return t.has(e.getLineNumber())})));try{for(i.s();!(s=i.n()).done;){var n=s.value;if(n.getValueIsAssigned()){if(n.getType()===_expression.DataType.Int&&n.getExecutionLineNumber()>=0){var r=_classPrivateFieldGet(this,_executionLines)[n.getExecutionLineNumber()],o=r.indexOfEntity(_expression.ExpressionEntity.AssignmentOperator),a=r.getExpressions();r.isVariableAssigned(n)&&o>0&&o<a.length-1&&a[o+1].is(_expression.ExpressionEntity.IntLiteral)&&(o+1===a.length-1||a[o+2].is(_expression.ExpressionCategory.Comment))&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.WhileLoopVarAssignedIntLiteral,r.getDocumentLineNumber(),r.getBlock().getId(),n.getDocIndex(),n.getDocIndex()-r.getDocumentStartingIndex(),e.getName()))}return!0}if(n.getExecutionLineNumber()>=0)if(n.isSubscripted()){var l=_classPrivateFieldGet(this,_executionLines)[n.getExecutionLineNumber()].getExpressions(),c=n.getIndex();if(c<l.length-4&&l[c+1].is(_expression.ExpressionEntity.OpenSquareBracket)){var p=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,l,c+1);if(p<l.length-1&&l[p+1].isChangeOperator())return!0}}else if(n.getType()===_expression.DataType.Unknown||n.getType()===_expression.DataType.List||n.getType()===_expression.DataType.Dict||n.getType()===_expression.DataType.Set){var _=_classPrivateFieldGet(this,_executionLines)[n.getExecutionLineNumber()].getExpressions(),h=n.getIndex();if(h<_.length-2&&_[h+1].is(_expression.ExpressionEntity.Dot)&&_[h+2].is(_expression.ExpressionCategory.BuiltInMethods)&&_expression.modifyingMethodsLookup.has(_[h+2].getEntity()))return!0}}}catch(e){i.e(e)}finally{i.f()}return!1}function _getLoopLineNumbers2(e){for(var t=e[0].getBlock(),s=new Set,i=void 0,n=1;n<e.length;n++){var r=e[n].getBlock().getBlockEntity();e[n].getBlock()===t||r!==_expression.ExpressionEntity.ForDefinition&&r!==_expression.ExpressionEntity.WhileDefinition?void 0!==i&&i.hasChild(e[n].getBlock())||s.add(e[n].getDocumentLineNumber()):i=e[n].getBlock()}return s}function _getIndexOfNextLineFollowingBlock2(e){for(var t=e+1;t<_classPrivateFieldGet(this,_executionLines).length&&(_classPrivateFieldGet(this,_executionLines)[t].isBlank()||_classPrivateFieldGet(this,_executionLines)[e].getBlock().hasChild(_classPrivateFieldGet(this,_executionLines)[t].getBlock()));)t++;for(;t>0&&_classPrivateFieldGet(this,_executionLines)[t-1].isBlank();)t--;return t}function _isWhileTrue2(e){var t=e.getExpressions();return 3===t.length&&(t[0].is(_expression.ExpressionEntity.WhileDefinition)&&t[1].is(_expression.ExpressionEntity.TrueType)&&t[2].is(_expression.ExpressionEntity.Colon))}function _allBranchesReturn2(e){var t=[];t.push(e.getIfIndex()),t=t.concat(e.getElifs()).concat([e.getElseIndex()]);for(var s=0;s<t.length;s++){var i=_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,t[s]);if(i[i.length-1].getBlock()!=_classPrivateFieldGet(this,_executionLines)[t[s]].getBlock()||-1===i[i.length-1].indexOfEntity(_expression.ExpressionEntity.ReturnKeyword))return!1}return!0}function _allBranchesExit2(e){var t=[];t.push(e.getIfIndex()),t=t.concat(e.getElifs()).concat([e.getElseIndex()]);for(var s=0;s<t.length;s++){var i=_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,t[s]);if(i[i.length-1].getBlock()!=_classPrivateFieldGet(this,_executionLines)[t[s]].getBlock()||-1===i[i.length-1].indexOfEntity(_expression.ExpressionEntity.ReturnKeyword)&&-1===i[i.length-1].indexOfEntity(_expression.ExpressionEntity.BreakKeyword)&&-1===i[i.length-1].indexOfEntity(_expression.ExpressionEntity.ExitFunction))return!1}return!0}function _getParentFunctionName2(e){var t=e.getBlock().getNearestParentOfAny([_expression.ExpressionEntity.FunctionDefinition]);if(void 0===t)return"";for(var s=t.getStartLine(),i=Math.min(e.getDocumentLineNumber(),_classPrivateFieldGet(this,_executionLines).length-1);i>=0;i--)if(_classPrivateFieldGet(this,_executionLines)[i].containsLine(s)&&_classPrivateFieldGet(this,_executionLines)[i].isFunctionDefinition())return _classPrivateFieldGet(this,_executionLines)[i].getExpressions()[1].getValue();return""}function _getException2(e){if(!(e.length<2)){var t,s=_createForOfIteratorHelper(e[0].getExpressions());try{for(s.s();!(t=s.n()).done;){var i=t.value;if(i.is(_expression.ExpressionCategory.BuiltInExceptions))return i}}catch(e){s.e(e)}finally{s.f()}}}function _getExecutionLineNumberFromDocLineNumber2(e){for(var t=e<_classPrivateFieldGet(this,_executionLines).length?e:_classPrivateFieldGet(this,_executionLines).length-1;t>=0&&t<_classPrivateFieldGet(this,_executionLines).length;){if(_classPrivateFieldGet(this,_executionLines)[t].containsLine(e)&&(0===t||!_classPrivateFieldGet(this,_executionLines)[t-1].containsLine(e)))return t;if(_classPrivateFieldGet(this,_executionLines)[t].minLine()>e)t--;else{if(!(_classPrivateFieldGet(this,_executionLines)[t].maxLine()<e))break;t++}}return-1}function _checkForBlockLevelSymptoms2(){var e=_classPrivateMethodGet(this,_getAllBlocksOf,_getAllBlocksOf2).call(this,_expression.ExpressionEntity.WhileDefinition),t=_classPrivateMethodGet(this,_getAllBlocksOf,_getAllBlocksOf2).call(this,_expression.ExpressionEntity.ForDefinition);_classPrivateMethodGet(this,_checkForRedundantRaise,_checkForRedundantRaise2).call(this),_classPrivateMethodGet(this,_checkForIteratorModification,_checkForIteratorModification2).call(this,t),_classPrivateMethodGet(this,_checkForCodeAfterExit,_checkForCodeAfterExit2).call(this,e,t),_classPrivateMethodGet(this,_checkForCodeAfterExhaustiveConditional,_checkForCodeAfterExhaustiveConditional2).call(this),_classPrivateMethodGet(this,_checkForWhileTrue,_checkForWhileTrue2).call(this,e),_classPrivateMethodGet(this,_checkForEarlyExit,_checkForEarlyExit2).call(this,e.concat(t)),_classPrivateMethodGet(this,_checkForShortenableConditionals,_checkForShortenableConditionals2).call(this),_classPrivateMethodGet(this,_checkForVariableSymptoms,_checkForVariableSymptoms2).call(this),_classPrivateMethodGet(this,_checkForUserDefinedFunctionSymptoms,_checkForUserDefinedFunctionSymptoms2).call(this),_classPrivateMethodGet(this,_checkForUnknownFunctions,_checkForUnknownFunctions2).call(this),_classPrivateMethodGet(this,_checkForSequentialIfs,_checkForSequentialIfs2).call(this)}function _checkForFunctionsWithSameNameAsVar2(e,t,s,i){if(_classPrivateFieldGet(this,_userDefinedFunctions).has(e)){var n=_classPrivateFieldGet(this,_userDefinedFunctions).get(e);_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.VariableWithSameNameAsFunction,t.getLineNumber(),s,t.getDocIndex(),i.getRawLocalIndex(),e,{funcType:_constants.USER_DEFINED_FUNCTION,numArgsExpected:n.getParameters().length-n.getNumberOfOptionalParameters()}))}(0,_expression.keywordLookup)(e).category===_expression.ExpressionCategory.BuiltInFunctions&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.VariableWithSameNameAsFunction,t.getLineNumber(),s,t.getDocIndex(),i.getRawLocalIndex(),e,{funcType:_constants.BUILT_IN_FUNCTION}))}function _checkForSequentialIfs2(){var e,t=_createForOfIteratorHelper(_classPrivateMethodGet(this,_identifyIfSequences,_identifyIfSequences2).call(this));try{for(t.s();!(e=t.n()).done;){var s=_slicedToArray(e.value,2),i=s[0],n=s[1],r=_classPrivateFieldGet(this,_executionLines)[i];if(0!==n.length){for(var o=_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,i,n[n.length-1].end),a=[],l=new _conditional.ConditionalSequence,c=1;c<n.length;c++){var p=_classPrivateMethodGet(this,_matchComponents,_matchComponents2).call(this,n[c].components,n[c-1].components)&&_classPrivateMethodGet(this,_matchComponents,_matchComponents2).call(this,n[c-1].components,n[c].components);p&&(l.containsBranch(_classPrivateFieldGet(this,_executionLines)[n[c-1].start].getDocumentLineNumber())||l.addBranch(_classPrivateFieldGet(this,_executionLines)[n[c-1].start].getDocumentLineNumber(),_classPrivateFieldGet(this,_executionLines)[n[c-1].start].getDocumentStartingIndex()),l.addBranch(_classPrivateFieldGet(this,_executionLines)[n[c].start].getDocumentLineNumber(),_classPrivateFieldGet(this,_executionLines)[n[c].start].getDocumentStartingIndex())),l.isEmpty()||p&&c!==n.length-1||(a.push(l.toJSON()),l=new _conditional.ConditionalSequence)}_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.SequentialIfs,r.getDocumentLineNumber(),r.getBlock().getId(),r.getDocumentStartingIndex()+r.getFirstExpression().getRawLocalIndex(),r.getFirstExpression().getRawLocalIndex(),o,{branchMatches:a}))}}}catch(e){t.e(e)}finally{t.f()}}function _checkForExecutionLineSymptoms2(){var e,t=_createForOfIteratorHelper(_classPrivateFieldGet(this,_executionLines));try{for(t.s();!(e=t.n()).done;){var s=e.value,i=s.getExpressions();_classPrivateMethodGet(this,_checkForTypeError,_checkForTypeError2).call(this,s),_classPrivateMethodGet(this,_checkForUnnecessaryConversion,_checkForUnnecessaryConversion2).call(this,s,i),_classPrivateMethodGet(this,_checkForAssignedNone,_checkForAssignedNone2).call(this,s,i),_classPrivateMethodGet(this,_checkForUnusedValues,_checkForUnusedValues2).call(this,s),_classPrivateMethodGet(this,_checkForUnexpectedColon,_checkForUnexpectedColon2).call(this,s,i),i.length>0&&i[0].isOneOfEntities([_expression.ExpressionEntity.IfDefinition,_expression.ExpressionEntity.ElifDefinition,_expression.ExpressionEntity.ForDefinition,_expression.ExpressionEntity.WhileDefinition])&&_classPrivateMethodGet(this,_checkForNaturalLanguageOr,_checkForNaturalLanguageOr2).call(this,i,s)}}catch(e){t.e(e)}finally{t.f()}}function _checkForUnexpectedColon2(e,t){var s=t.length-1,i=-1;if(0===t.length||!t[0].is(_expression.ExpressionCategory.BlockDefinitions)&&!t[0].is(_expression.ExpressionEntity.WithKeyword)){for(;s>=0;){if(t[s].is(_expression.ExpressionEntity.Colon)&&!_classPrivateMethodGet(this,_isExpressionInGroup,_isExpressionInGroup2).call(this,t,s)){i=s;break}s--}i>=0&&!t[0].is(_expression.ExpressionCategory.BlockDefinitions)&&!t[0].is(_expression.ExpressionEntity.WithKeyword)&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnexpectedColon,t[i].getLineNumber(),e.getBlock().getId(),e.getDocumentStartingIndex()+t[i].getRawLocalIndex(),t[i].getRawLocalIndex(),t[i].getValue(),{before:_classPrivateMethodGet(this,_summariseExpressions,_summariseExpressions2).call(this,t,0,i-1),after:_classPrivateMethodGet(this,_summariseExpressions,_summariseExpressions2).call(this,t,i+1,t.length-1)}))}}function _checkForNaturalLanguageOr2(e,t){for(var s=[],i=1;i<e.length-1;i++)if(e[i].is(_expression.ExpressionEntity.OrOperator)&&(e[i+1].is(_expression.ExpressionCategory.Literals)||e[i+1].is(_expression.ExpressionEntity.VariableName))&&e[i+1].getDataType()!==_expression.DataType.Bool&&e[i+1].getDataType()!==_expression.DataType.Unknown){var n=i+2;if(n<e.length&&(e[n].isOneOfCategories([_expression.ExpressionCategory.ComparisonOperators,_expression.ExpressionCategory.MathsOperators])||e[n].isOneOfEntities([_expression.ExpressionEntity.IsKeyword,_expression.ExpressionEntity.InKeyword,_expression.ExpressionEntity.Dot,_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket])||n<e.length-1&&e[n].is(_expression.ExpressionEntity.NotOperator)&&e[n+1].is(_expression.ExpressionEntity.InKeyword)))continue;if(s.length>0){var r=s[s.length-1];r[r.length-1]<i-1?s.push([i,i+1]):s[s.length-1]=r.concat([i,i+1])}else s.push([i,i+1])}for(var o=0,a=s;o<a.length;o++){var l=a[o],c=e[l[l.length-1]];_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.NaturalLanguageBoolean,e[l[0]].getLineNumber(),t.getBlock().getId(),t.getDocumentStartingIndex(),e[l[0]].getRawLocalIndex(),t.getText(!0).substring(e[l[0]].getRawLocalIndex(),c.getRawLocalIndex()+(c.getEntity()===_expression.ExpressionEntity.StringLiteral?c.getValue().length+2:c.getValue().length)),{valueType:l.filter((function(e,t){return t%2==1})).map((function(t){return e[t].is(_expression.ExpressionEntity.VariableName)?e[t].getDataType():e[t].getEntity()}))}))}}function _checkForUnusedValues2(e){var t=e.getCompoundExpression(),s=e.getFirstExpression();if(t.numberOfParts()>0&&0===t.getIndexInLine()&&t.getEvaluatedType()!==_expression.DataType.None&&t.getEvaluatedType()!==_expression.DataType.Unknown&&!(1===t.numberOfParts()&&(s.is(_expression.ExpressionEntity.FunctionName)||s.isOneOfCategories([_expression.ExpressionCategory.BuiltInFunctions,_expression.ExpressionCategory.BuiltInMethods,_expression.ExpressionCategory.ModuleFunctions]))||s.is(_expression.ExpressionEntity.AssertFunction))){var i=!1;if(1===t.numberOfParts()){var n=e.indexOfEntity(_expression.ExpressionCategory.BuiltInMethods),r=e.getExpressions();if(n>0){for(var o=r[n],a=n+1;a<r.length;a++)r[a].isOneOfEntities([_expression.ExpressionEntity.OpenParenthesis,_expression.ExpressionEntity.OpenSquareBracket,_expression.ExpressionEntity.OpenBrace])?a=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,r,a):r[a].is(_expression.ExpressionCategory.BuiltInMethods)&&(o=r[a]);i=!0,_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnusedReturn,s.getLineNumber(),e.getBlock().getId(),e.getDocumentStartingIndexOfLine(s.getLineNumber())+s.getLocalIndex(),s.getLocalIndex(),e.getText(!1),{expression:o}))}}i||_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnusedValue,e.getDocumentLineNumber(),e.getBlock().getId(),e.getFirstExpression().is(_expression.ExpressionEntity.StringLiteral)?e.getDocumentStartingIndex()+e.getFirstExpression().getRawLocalIndex()-2:e.getDocumentStartingIndex()+e.getFirstExpression().getRawLocalIndex(),e.getFirstExpression().getRawLocalIndex(),e.getText()))}}function _checkForAssignedNone2(e,t){var s,i=_createForOfIteratorHelper(t);try{for(i.s();!(s=i.n()).done;){var n=s.value;if(n.is(_expression.ExpressionCategory.BuiltInFunctions)){var r=n.getUsedBy()!==_expression.UsageType.None,o=n.getRawLocalIndex(),a=n.getLineNumber();_expression.builtInReturnLookup.get(n.getEntity())!==_expression.DataType.None?r||_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnusedReturn,a,e.getBlock().getId(),e.getDocumentStartingIndexOfLine(a)+o,o,n.getValue(),{expression:n})):r&&n.getEntity()!==_expression.ExpressionEntity.AssertFunction&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.AssignedNone,a,e.getBlock().getId(),e.getDocumentStartingIndexOfLine(a)+o,o,n.getValue(),{expression:n}))}}}catch(e){i.e(e)}finally{i.f()}}function _checkForUnnecessaryConversion2(e,t){for(var s=0;s<t.length;s++)if(t[s].isOneOfEntities([_expression.ExpressionEntity.StrFunction,_expression.ExpressionEntity.IntFunction,_expression.ExpressionEntity.FloatFunction,_expression.ExpressionEntity.BoolFunction,_expression.ExpressionEntity.ListFunction])){var i=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,t,s+1),n=_classPrivateMethodGet(this,_getArgumentType,_getArgumentType2).call(this,e,t,s+1,i),r=_expression.builtInReturnLookup.get(t[s].getEntity());if(n==r||n===_expression.DataType.String&&t[s].is(_expression.ExpressionEntity.ListFunction)){var o=t[s].getLineNumber(),a=(t[i].getRawLocalIndex(),e.getTextBetweenExpressions(s,i)),l=e.getDocumentStartingIndexOfLine(o)+t[s].getRawLocalIndex();_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.TypeUnnecessary,o,e.getBlock().getId(),l,t[s].getRawLocalIndex(),a,{convertedValue:e.getTextBetweenExpressions(s+2,i-1),argType:n.name,convertedType:r.name}))}}}function _checkForTypeError2(e){var t,s=_createForOfIteratorHelper(e.getSymptoms());try{for(s.s();!(t=s.n()).done;){var i=t.value.getID();if(i===_symptom.SymptomType.OutOfPlaceBooleanOperator.name||i===_symptom.SymptomType.DoubleBooleanOperators.name||i===_symptom.SymptomType.AssignmentInBoolean.name||i===_symptom.SymptomType.AndOr.name)return}}catch(e){s.e(e)}finally{s.f()}var n,r=_createForOfIteratorHelper(e.getCompoundExpression().getAllFeedback());try{for(r.s();!(n=r.n()).done;){var o=n.value;_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.TypeErrorInvalid,e.getDocumentLineNumber(),e.getBlock().getId(),e.getDocumentStartingIndex()+o.getLocalIndex(),e.getIndent(),e.getText(!1),{feedback:o.getMessage()}))}}catch(e){r.e(e)}finally{r.f()}}function _checkForUnknownFunctions2(){var e,t=_createForOfIteratorHelper(_classPrivateFieldGet(this,_untrackedFunctions).values());try{for(t.s();!(e=t.n()).done;){var s=e.value;if(!_classPrivateFieldGet(this,_otherIdentifiers).has(s.getName())){var i=!1;if(_classPrivateFieldGet(this,_variables).has(s.getName())){var n,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).get(s.getName()));try{for(r.s();!(n=r.n()).done;){if(n.value.isImport()){i=!0;break}}}catch(e){r.e(e)}finally{r.f()}}if(i)break;var o,a=_createForOfIteratorHelper(s.getFunctionCalls());try{for(a.s();!(o=a.n()).done;){var l=o.value,c=this.getExecutionLineContainingExpression(s.getName(),l.getLineNumber(),l.getIndex()),p=c.getText(!0).indexOf(s.getName());_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnknownFunction,c.getDocumentLineNumber(),c.getBlock().getId(),c.getDocumentStartingIndex()+p,p,s.getName()))}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){t.e(e)}finally{t.f()}}function _checkForUserDefinedFunctionSymptoms2(){var e,t=_createForOfIteratorHelper(_classPrivateFieldGet(this,_userDefinedFunctions).values());try{for(t.s();!(e=t.n()).done;){var s=e.value;_classPrivateMethodGet(this,_checkFunctionCalls,_checkFunctionCalls2).call(this,s),s.hasReturn()&&_classPrivateMethodGet(this,_checkFunctionReturns,_checkFunctionReturns2).call(this,s);var i=s.getLinesWithEntity(_expression.ExpressionEntity.PrintFunction);if(i.length>0){var n=s.getLines(),r=n.length>0?n[0].getDocumentLineNumber():-1,o=n.length>0?n[0].getExpressionOnLine(r,n[0].indexOfEntity(_expression.ExpressionEntity.FunctionName)):void 0,a=n.length>0?n[0].getText(!0).indexOf(s.getName()):-1,l=void 0!==o?n[0].getDocumentStartingIndex()+a:-1;_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.FunctionPrints,r,void 0!==s.getBlock()?s.getBlock().getId():"",l,a,s.getName(),{printLines:i.map((function(e){return e.getDocumentLineNumber()})),functionReturns:s.hasReturn()}))}}}catch(e){t.e(e)}finally{t.f()}}function _checkFunctionReturns2(e){var t,s=_createForOfIteratorHelper(e.getReturnLines());try{for(s.s();!(t=s.n()).done;){var i=t.value,n=i.getExpressions(),r=i.indexOfEntity(_expression.ExpressionEntity.ReturnKeyword);if(r>=0&&r<n.length-2&&n[r+1].is(_expression.ExpressionEntity.OpenParenthesis)&&i.getCompoundExpression().getEvaluatedType()!==_expression.DataType.Tuple){for(var o=n[r].getLineNumber(),a=r+1,l=n.length-1,c=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,n,a);l>a&&n[l].is(_expression.ExpressionCategory.Comment);)l--;if(c!==l)continue;_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.ReturnInParentheses,o,i.getBlock().getId(),i.getDocumentStartingIndexOfLine(o)+n[r].getRawLocalIndex(),n[r].getRawLocalIndex(),i.getText(),{contents:_classPrivateMethodGet(this,_getSummaryOfContentInParentheses,_getSummaryOfContentInParentheses2).call(this,n,a,l)}))}}}catch(e){s.e(e)}finally{s.f()}}function _checkFunctionCalls2(e){var t,s=_createForOfIteratorHelper(e.getFunctionCalls());try{for(s.s();!(t=s.n()).done;){var i=t.value,n=this.getExecutionLineContainingExpression(e.getName(),i.getLineNumber(),i.getIndex()),r=n.getExpressionOnLine(i.getLineNumber(),i.getIndex()),o=r.getUsedBy()!==_expression.UsageType.None,a=r.getRawLocalIndex(),l=n.getDocumentStartingIndexOfLine(i.getLineNumber())+a;e.hasReturn()?o||_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnusedReturn,i.getLineNumber(),n.getBlock().getId(),l,a,e.getName(),{expression:r})):o&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.AssignedNone,i.getLineNumber(),n.getBlock().getId(),l,a,e.getName(),{expression:r}));var c=_classPrivateMethodGet(this,_getNumberOfArguments,_getNumberOfArguments2).call(this,n,n.convertLineIndexToLocalIndex(i.getLineNumber(),i.getIndex()));(c<e.getParameters().length-e.getNumberOfOptionalParameters()||c>e.getParameters().length)&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.WrongArgNumber,i.getLineNumber(),n.getBlock().getId(),l,a,e.getName()))}}catch(e){s.e(e)}finally{s.f()}}function _checkForVariableSymptoms2(){var e,t=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).keys());try{for(t.s();!(e=t.n()).done;){var s,i=e.value,n=_createForOfIteratorHelper(_classPrivateFieldGet(this,_variables).get(i));try{for(n.s();!(s=n.n()).done;){var r=s.value,o=r.getFirstUsage(),a=o.getLineNumber(),l=o.getDocIndex(),c=this.getExecutionLineContainingExpression(i,a,o.getIndex()),p=l-c.getDocumentStartingIndexOfLine(a);if(!(void 0!==c&&c.getFirstExpression().is(_expression.ExpressionEntity.GlobalKeyword))&&!_classPrivateMethodGet(this,_isTypeVariable,_isTypeVariable2).call(this,i)){var _=_classPrivateMethodGet(this,_isUndefined,_isUndefined2).call(this,r,c);if(_)_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UndefinedVariable,a,c.getBlock().getId(),l,p,i,{variable:r}));else if(!_&&!r.isUsed()&&!_classPrivateFieldGet(this,_otherIdentifiers).has(i)){var h=r.isImport()&&_classPrivateFieldGet(this,_modules).has(i)&&_classPrivateFieldGet(this,_modules).get(i).hasDirectImports();c.isVariablePassedToFunction(r.getFirstUsage())||h||_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnusedVariable,a,c.getBlock().getId(),l,p,i))}r.isImport()||(_classPrivateMethodGet(this,_checkVariableOverwrites,_checkVariableOverwrites2).call(this,r),_classPrivateMethodGet(this,_checkSubscriptions,_checkSubscriptions2).call(this,r,_))}}}catch(e){n.e(e)}finally{n.f()}}}catch(e){t.e(e)}finally{t.f()}}function _checkSubscriptions2(e,t){var s,i=_createForOfIteratorHelper(e.getUsages());try{for(i.s();!(s=i.n()).done;){var n=s.value,r=n.getType();if(n.isSubscripted()&&(t||!_classPrivateMethodGet(this,_isSubscriptable,_isSubscriptable2).call(this,r))){var o=n.getDocIndex(),a=this.getExecutionLineContainingExpression(e.getName(),n.getLineNumber(),n.getIndex()),l=o-a.getDocumentStartingIndexOfLine(n.getLineNumber()),c=a.getExpressions(),p=e.getName();if(c[n.getIndex()+1].is(_expression.ExpressionEntity.OpenSquareBracket)){var _=_classPrivateMethodGet(this,_findClosingExpression,_findClosingExpression2).call(this,c,n.getIndex()+1);p+=_classPrivateMethodGet(this,_getGroupText,_getGroupText2).call(this,c,n.getIndex()+1,_)}_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.SubscriptedNonSubscriptable,n.getLineNumber(),a.getBlock().getId(),o,l,p,{isUndefined:t,subscriptedType:r,varName:e.getName()}))}}}catch(e){i.e(e)}finally{i.f()}}function _checkVariableOverwrites2(e){for(var t=e.getUsages(),s=t[0],i=s.getLineNumber(),n=this.getExecutionLineContainingExpression(e.getName(),i,s.getIndex()),r=n.isVariableAssigned(s)||e.isParameter(),o=n.isVariableIncremented(s),a=_classPrivateMethodGet(this,_checkIfForLoopVariable,_checkIfForLoopVariable2).call(this,s,n),l=n.getBlock(),c=n.countOccurrencesOnLine(e.getName(),_expression.ExpressionEntity.VariableName),p=c>1?c-1:1;p<t.length;){var _=t[p].getLineNumber(),h=this.getExecutionLineContainingExpression(e.getName(),_,t[p].getIndex()),d=h.getExpressionOnLine(_,t[p].getIndex()),x=h.getBlock(),u=h.isVariableAssigned(t[p]),g=h.isVariableIncremented(t[p]),E=_classPrivateMethodGet(this,_checkIfForLoopVariable,_checkIfForLoopVariable2).call(this,t[p],h),f=h.countOccurrencesOnLine(e.getName(),_expression.ExpressionEntity.VariableName),y=l===x||E&&l===x.getParentBlock();1===f&&y&&(r||o||a)&&(u||E)&&!g&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.OverwrittenVariable,_,x.getId(),h.getDocumentStartingIndexOfLine(_)+d.getRawLocalIndex(),d.getRawLocalIndex(),e.getName(),{isParameter:e.isParameter(),prevUsageIsDefinition:1===p,overwriteType:E?_constants.FOR_LOOP_VAR:_constants.ASSIGNMENT,overwriteValue:_classPrivateMethodGet(this,_compareValues,_compareValues2).call(this,s,n,r,t[p],h,E)})),i=_,n=h,l=x,r=u,o=g,a=E,p+=f}}function _checkForShortenableConditionals2(){var e,t=_createForOfIteratorHelper(_classPrivateFieldGet(this,_conditionals));try{for(t.s();!(e=t.n()).done;){var s=e.value;_classPrivateMethodGet(this,_checkForBooleanAssignment,_checkForBooleanAssignment2).call(this,s),_classPrivateMethodGet(this,_checkForBooleanReturn,_checkForBooleanReturn2).call(this,s)}}catch(e){t.e(e)}finally{t.f()}}function _checkForBooleanAssignment2(e){var t=[[_expression.ExpressionEntity.VariableName],[_expression.ExpressionEntity.AssignmentOperator],[_expression.ExpressionEntity.TrueType]],s=[[_expression.ExpressionEntity.VariableName],[_expression.ExpressionEntity.AssignmentOperator],[_expression.ExpressionEntity.FalseType]],i=_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,e.getIfIndex()),n=_classPrivateFieldGet(this,_executionLines)[e.getIfIndex()];if(_classPrivateMethodGet(this,_blockMatchesPattern,_blockMatchesPattern2).call(this,e.getIfIndex(),t)){var r=i[i.length-1].getExpressions()[0].getValue();if(!e.hasElifs()&&e.hasElse()){var o=_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,e.getElseIndex());_classPrivateMethodGet(this,_blockMatchesPattern,_blockMatchesPattern2).call(this,e.getElseIndex(),s)&&r===o[o.length-1].getFirstExpression().getValue()&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.OneLineConditional,n.getDocumentLineNumber(),n.getBlock().getId(),n.getDocumentStartingIndex(),n.getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,e.getIfIndex(),e.getElseIndex()+o.length-1),{form:_constants.VALUE_ASSIGNED,variableAssigned:r}))}else if(1===e.getNumberOfBranches()){var a=_classPrivateMethodGet(this,_getIndexOfNextLineFollowingBlock,_getIndexOfNextLineFollowingBlock2).call(this,e.getIfIndex()),l=_classPrivateFieldGet(this,_executionLines)[a];l.getBlock()===n.getBlock().getParentBlock()&&1===l.getSequencesOfPattern(s).length&&l.getFirstExpression().getValue()===r&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.OneLineConditional,n.getDocumentLineNumber(),n.getBlock().getId(),n.getDocumentStartingIndex(),n.getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,e.getIfIndex(),a),{form:_constants.VALUE_ASSIGNED,variableAssigned:r}))}}}function _checkForBooleanReturn2(e){var t=[[_expression.ExpressionEntity.ReturnKeyword],[_expression.ExpressionEntity.TrueType]],s=[[_expression.ExpressionEntity.ReturnKeyword],[_expression.ExpressionEntity.FalseType]],i=_classPrivateFieldGet(this,_executionLines)[e.getIfIndex()];if(_classPrivateMethodGet(this,_blockMatchesPattern,_blockMatchesPattern2).call(this,e.getIfIndex(),t))if(!e.hasElifs()&&e.hasElse()){if(_classPrivateMethodGet(this,_blockMatchesPattern,_blockMatchesPattern2).call(this,e.getElseIndex(),s)){var n=_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,e.getElseIndex());_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.OneLineConditional,i.getDocumentLineNumber(),i.getBlock().getId(),i.getDocumentStartingIndex(),i.getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,e.getIfIndex(),e.getElseIndex()+n.length-1),{form:_constants.VALUE_RETURNED}))}}else if(1===e.getNumberOfBranches()){var r=_classPrivateMethodGet(this,_getIndexOfNextLineFollowingBlock,_getIndexOfNextLineFollowingBlock2).call(this,e.getIfIndex()),o=_classPrivateFieldGet(this,_executionLines)[r];void 0!==o&&o.getBlock()===i.getBlock().getParentBlock()&&1===o.getSequencesOfPattern(s).length&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.OneLineConditional,i.getDocumentLineNumber(),i.getBlock().getId(),i.getDocumentStartingIndex(),i.getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,e.getIfIndex(),r),{form:_constants.VALUE_RETURNED}))}}function _checkForEarlyExit2(e){var t,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;)for(var i=t.value,n=0;n<i.length;n++){var r=i[n].getBlock();if(!(i[n].indexOfEntity(_expression.ExpressionEntity.ReturnKeyword)>=0||i[n].indexOfEntity(_expression.ExpressionEntity.BreakKeyword)>=0||i[n].indexOfEntity(_expression.ExpressionEntity.ExitFunction)>=0)||r.getBlockEntity()!==_expression.ExpressionEntity.ForDefinition&&r.getBlockEntity()!==_expression.ExpressionEntity.WhileDefinition||r!==i[0].getBlock()){if(i[n].indexOfEntity(_expression.ExpressionEntity.ContinueKeyword)>=0&&(r.getBlockEntity()===_expression.ExpressionEntity.IfDefinition||r.getBlockEntity()===_expression.ExpressionEntity.ElifDefinition||r.getBlockEntity()===_expression.ExpressionEntity.ElseDefinition)&&r.getNearestParentOfAny([_expression.ExpressionEntity.ForDefinition,_expression.ExpressionEntity.WhileDefinition])===i[0].getBlock())break}else _classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.LoopReturn,i[n].getDocumentLineNumber(),i[n].getBlock().getId(),i[n].getDocumentStartingIndex()+i[0].getIndent(),i[n].getIndent(),i[n].getText(!1)))}}catch(e){s.e(e)}finally{s.f()}}function _checkForWhileTrue2(e){var t,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;if(_classPrivateMethodGet(this,_isWhileTrue,_isWhileTrue2).call(this,i[0]))_classPrivateMethodGet(this,_loopExits,_loopExits2).call(this,i)||_classPrivateMethodGet(this,_processInfiniteLoop,_processInfiniteLoop2).call(this,i),_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.WhileTrue,i[0].getDocumentLineNumber(),i[0].getBlock().getId(),i[0].getDocumentStartingIndex()+i[0].getIndent(),i[0].getIndent(),i[0].getText(!1)));else _classPrivateMethodGet(this,_checkForUnmodifiedLoopVar,_checkForUnmodifiedLoopVar2).call(this,i)}}catch(e){s.e(e)}finally{s.f()}}function _processInfiniteLoop2(e){_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.InfiniteLoop,e[0].getDocumentLineNumber(),e[0].getBlock().getId(),e[0].getDocumentStartingIndex()+e[0].getIndent(),e[0].getIndent(),e[0].getText(!1)));for(var t=_classPrivateMethodGet(this,_getExecutionLineNumberFromDocLineNumber,_getExecutionLineNumberFromDocLineNumber2).call(this,e[0].getDocumentLineNumber()),s=_classPrivateMethodGet(this,_getIndexOfNextLineFollowingBlock,_getIndexOfNextLineFollowingBlock2).call(this,t);s<_classPrivateFieldGet(this,_executionLines).length&&_classPrivateFieldGet(this,_executionLines)[s].isBlank();)s++;s<_classPrivateFieldGet(this,_executionLines).length&&_classPrivateFieldGet(this,_executionLines)[t].getIndent()===_classPrivateFieldGet(this,_executionLines)[s].getIndent()&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnreachableInfiniteLoop,_classPrivateFieldGet(this,_executionLines)[s].getDocumentLineNumber(),_classPrivateFieldGet(this,_executionLines)[s].getBlock().getId(),_classPrivateFieldGet(this,_executionLines)[s].getDocumentStartingIndex()+_classPrivateFieldGet(this,_executionLines)[s].getIndent(),_classPrivateFieldGet(this,_executionLines)[s].getIndent(),_classPrivateFieldGet(this,_executionLines)[s].getText(!1),{infiniteLoopLine:e[0].getDocumentLineNumber()}))}function _checkForUnmodifiedLoopVar2(e){var t,s=this,i=_classPrivateMethodGet(this,_getLoopVars,_getLoopVars2).call(this,e[0]),n=e[0].getBlock().getMatchingChildBlocks([_expression.ExpressionEntity.WhileDefinition,_expression.ExpressionEntity.ForDefinition]),r=_classPrivateMethodGet(this,_getBlocksWithinParent,_getBlocksWithinParent2).call(this,e,n),o=new Set,a=new Map,l=_createForOfIteratorHelper(i);try{for(l.s();!(t=l.n()).done;){var c=t.value,p=_classPrivateMethodGet(this,_findMatchingVariable,_findMatchingVariable2).call(this,c);if(void 0!==p){var _=_classPrivateMethodGet(this,_getLoopLineNumbers,_getLoopLineNumbers2).call(this,e);_classPrivateMethodGet(this,_isVarModified,_isVarModified2).call(this,p,_)||o.add(c.getValue());var h,d=_createForOfIteratorHelper(r);try{var x=function(){var e=h.value,t=_classPrivateMethodGet(s,_getLoopLineNumbers,_getLoopLineNumbers2).call(s,e);_classPrivateMethodGet(s,_isVarModified,_isVarModified2).call(s,p,t)&&(a.has(c.getValue())||a.set(c.getValue(),[]),a.get(c.getValue()).push({varIndex:c.getRawLocalIndex(),varDataType:new Set(p.getUsages().filter((function(e){return t.has(e.getLineNumber())})).map((function(e){return e.getType().name}))),loopType:e[0].getBlock().getBlockEntity(),startLine:e[0].getBlock().getStartLine()}))};for(d.s();!(h=d.n()).done;)x()}catch(e){d.e(e)}finally{d.f()}}}}catch(e){l.e(e)}finally{l.f()}var u,g=_createForOfIteratorHelper(a);try{for(g.s();!(u=g.n()).done;){var E=_slicedToArray(u.value,2),f=E[0],y=E[1];_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.LoopVarModifiedInChildLoop,e[0].getDocumentLineNumber(),e[0].getBlock().getId(),e[0].getDocumentStartingIndex()+y[0].varIndex,y[0].varIndex,f,{modifiedIn:{loopType:y[0].loopType.name,startLine:y[0].startLine},varDataType:Array.from(y[0].varDataType)}))}}catch(e){g.e(e)}finally{g.f()}o.size>0&&o.size===i.length&&(_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.LoopVarNotModified,e[0].getDocumentLineNumber(),e[0].getBlock().getId(),e[0].getDocumentStartingIndex()+e[0].getIndent(),e[0].getIndent(),e[0].getText(!1),{unmodifiedVars:Array.from(o)})),0!==a.size||_classPrivateMethodGet(this,_loopExits,_loopExits2).call(this,e)||_classPrivateMethodGet(this,_processInfiniteLoop,_processInfiniteLoop2).call(this,e))}function _checkForCodeAfterExhaustiveConditional2(){var e,t=_createForOfIteratorHelper(_classPrivateFieldGet(this,_conditionals).filter((function(e){return e.isExhaustive()})));try{for(t.s();!(e=t.n()).done;){var s=e.value;if(_classPrivateMethodGet(this,_allBranchesReturn,_allBranchesReturn2).call(this,s)){for(var i=_classPrivateMethodGet(this,_getIndexOfNextLineFollowingBlock,_getIndexOfNextLineFollowingBlock2).call(this,s.getElseIndex());i<_classPrivateFieldGet(this,_executionLines).length&&_classPrivateFieldGet(this,_executionLines)[i].isBlank();)i++;i<_classPrivateFieldGet(this,_executionLines).length&&_classPrivateFieldGet(this,_executionLines)[s.getElseIndex()].getIndent()===_classPrivateFieldGet(this,_executionLines)[i].getIndent()&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnreachableExhaustiveConditional,_classPrivateFieldGet(this,_executionLines)[i].getDocumentLineNumber(),_classPrivateFieldGet(this,_executionLines)[i].getBlock().getId(),_classPrivateFieldGet(this,_executionLines)[i].getDocumentStartingIndex()+_classPrivateFieldGet(this,_executionLines)[i].getIndent(),_classPrivateFieldGet(this,_executionLines)[i].getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,i,_classPrivateFieldGet(this,_executionLines).length-1,_classPrivateFieldGet(this,_executionLines)[i].getBlock())))}if(_classPrivateMethodGet(this,_allBranchesExit,_allBranchesExit2).call(this,s)){var n=_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getBlock().getParentBlock().getBlockEntity();if(n===_expression.ExpressionEntity.ForDefinition||n===_expression.ExpressionEntity.WhileDefinition){var r=_classPrivateMethodGet(this,_getIndexOfNextLineFollowingBlock,_getIndexOfNextLineFollowingBlock2).call(this,s.getElseIndex());r<_classPrivateFieldGet(this,_executionLines).length&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.LoopReturn,_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getDocumentLineNumber(),_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getBlock().getParentBlock().getId(),_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getDocumentStartingIndex()+_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getIndent(),_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,s.getIfIndex(),r,_classPrivateFieldGet(this,_executionLines)[s.getIfIndex()].getBlock())))}}}}catch(e){t.e(e)}finally{t.f()}}function _checkForIteratorModification2(e){var t,s=this,i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=n[0],o=r.getExpressions();if(o[0].is(_expression.ExpressionEntity.ForDefinition)){var a=r.indexOfEntity(_expression.ExpressionEntity.VariableName);if(a>0){var l=o[a],c=_classPrivateMethodGet(this,_findMatchingVariable,_findMatchingVariable2).call(this,l);void 0!==c&&function(){for(var e=r.getDocumentLineNumber()+1,t=n[n.length-1].maxLine(),i=c.getUsages().filter((function(s){return s.getLineNumber()>=e&&s.getLineNumber()<=t})),o=[],a=[],l=0;l<i.length;l++){var p=s.getExecutionLineContainingExpression(c.getName(),i[l].getLineNumber(),i[l].getIndex());p.isVariableAssigned(i[l])||p.isVariableIncremented(i[l])?(o.push(l),a.push(p)):p.getExpressions()[i[l].getIndex()].getUsedBy()!==_expression.UsageType.None&&(o=[],a=[])}if(o.length>0){var _=i[o[0]],h=a[0];_classPrivateFieldGet(s,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.ForLoopIteratorModified,_.getLineNumber(),h.getBlock().getId(),_.getDocIndex(),_.getDocIndex()-h.getDocumentStartingIndex(),c.getName()))}}()}}}}catch(e){i.e(e)}finally{i.f()}}function _checkForCodeAfterExit2(e,t){var s,i=e.concat(t),n=_createForOfIteratorHelper(_classPrivateFieldGet(this,_userDefinedFunctions).keys());try{for(n.s();!(s=n.n()).done;){var r=s.value;i=i.concat([_classPrivateFieldGet(this,_userDefinedFunctions).get(r).getLines()])}}catch(e){n.e(e)}finally{n.f()}var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l[0].isFunctionDefinition()||!l[0].getBlock().hasParentOfEntity(_expression.ExpressionEntity.FunctionDefinition))for(var c=0;c<l.length-1;c++){var p=l[c].indexOfEntity(_expression.ExpressionEntity.ReturnKeyword),_=l[c].indexOfEntity(_expression.ExpressionEntity.BreakKeyword);if((p>=0||_>=0)&&l[c].getBlock().hasChild(l[c+1].getBlock())){var h={};_>=0?h.exitKeyword=_constants.BREAK_KEYWORD:p>=0&&(h.exitKeyword=_constants.RETURN_KEYWORD,h.functionName=_classPrivateMethodGet(this,_getParentFunctionName,_getParentFunctionName2).call(this,l[c])),_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.UnreachableExit,l[c+1].getDocumentLineNumber(),l[c+1].getBlock().getId(),l[c+1].getDocumentStartingIndex()+l[c+1].getIndent(),l[c+1].getIndent(),_classPrivateMethodGet(this,_buildBlockString,_buildBlockString2).call(this,c+1,l.length-1,l[c+1].getBlock(),l),h))}}}}catch(e){a.e(e)}finally{a.f()}}function _checkForRedundantRaise2(){var e,t=_createForOfIteratorHelper(_classPrivateMethodGet(this,_getAllBlocksOf,_getAllBlocksOf2).call(this,_expression.ExpressionEntity.ExceptDefinition));try{for(t.s();!(e=t.n()).done;){var s=e.value,i=_classPrivateMethodGet(this,_getException,_getException2).call(this,s);if(void 0!==i)for(var n=1;n<s.length;n++)s[n].indexOfEntity(_expression.ExpressionEntity.RaiseKeyword)>=0&&s[n].indexOfEntity(i.getEntity())>=0&&_classPrivateFieldGet(this,_symptoms).push(_symptom.Symptom.create(_symptom.SymptomType.RedundantException,s[n].getDocumentLineNumber(),s[n].getBlock().getId(),s[n].getDocumentStartingIndex()+s[n].getIndent(),s[n].getIndent(),"raise "+i.getValue()))}}catch(e){t.e(e)}finally{t.f()}}function _getBlockBeginningOnExecutionLine2(e){for(var t=_classPrivateFieldGet(this,_executionLines)[e].getBlock(),s=[];e<_classPrivateFieldGet(this,_executionLines).length&&t.hasChild(_classPrivateFieldGet(this,_executionLines)[e].getBlock());)_classPrivateFieldGet(this,_executionLines)[e].isBlank()||s.push(_classPrivateFieldGet(this,_executionLines)[e]),e++;return s}function _getAllBlocksOf2(e){return _classPrivateMethodGet(this,_getAllBlocksOfAny,_getAllBlocksOfAny2).call(this,[e])}function _getAllBlocksOfAny2(e){for(var t=[],s=0;s<_classPrivateFieldGet(this,_executionLines).length;s++){var i,n=_createForOfIteratorHelper(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;_classPrivateFieldGet(this,_executionLines)[s].indexOfEntity(r)>=0&&t.push(_classPrivateMethodGet(this,_getBlockBeginningOnExecutionLine,_getBlockBeginningOnExecutionLine2).call(this,s))}}catch(e){n.e(e)}finally{n.f()}}return t}exports.DocInfo=DocInfo;
